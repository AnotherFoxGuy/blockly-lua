// Do not edit this file; automatically generated by build.py.
'use strict';

var ComputerCraft={Block:{}};Blockly.ComputerCraft={};Blockly.ComputerCraft.BASE_HELP_URL="http://computercraft.info/wiki/";Blockly.ComputerCraft.StmtConns={NONE:0,PREVIOUS:1,NEXT:2,BOTH:3};Blockly.ComputerCraft.HelpUrlType={PREFIX_NAME:1,PREFIX_DD:2};Blockly.ComputerCraft.LOWER_TO_UPPER_REGEX_=/([a-z])(?=[A-Z])/g;Blockly.ComputerCraft.convertFromCamelCase=function(a){return a.replace(Blockly.ComputerCraft.LOWER_TO_UPPER_REGEX_,"$1_").toLowerCase()};
Blockly.ComputerCraft.getBlockName_=function(a,b){var c=b.blockName;c||(goog.asserts.assert(b.funcName,"info.funcName not defined"),c=Blockly.ComputerCraft.convertFromCamelCase(b.funcName));return a+"_"+c};Blockly.ComputerCraft.Block=function(a,b,c){this.prefix=a;this.colour=b;this.info=c;this.blockName=Blockly.ComputerCraft.getBlockName_(a,c)};
Blockly.ComputerCraft.Block.prototype.init=function(){this.setColour(this.colour);this.setInputsInline(!0);this.info.helpUrlType==Blockly.ComputerCraft.HelpUrlType.PREFIX_NAME&&(this.helpUrl=Blockly.ComputerCraft.BASE_HELP_URL+this.prefix.charAt(0).toUpperCase()+this.prefix.slice(1)+"."+this.info.funcName);if(this.info.tooltip)if("function"==typeof this.info.tooltip){var a=this;this.setTooltip(function(){return a.info.tooltip(a)})}else this.setTooltip(this.info.tooltip);this.info.multipleOutputs||
"undefined"!=typeof this.info.output||this.info.stmtConns==Blockly.ComputerCraft.StmtConns.NONE||(this.info.stmtConns=Blockly.ComputerCraft.StmtConns.BOTH);this.info.stmtConns&&(this.setPreviousStatement(0!=(this.info.stmtConns&Blockly.ComputerCraft.StmtConns.PREVIOUS)),this.setNextStatement(0!=(this.info.stmtConns&Blockly.ComputerCraft.StmtConns.NEXT)));"undefined"!=typeof this.info.output&&this.setOutput(!0,this.info.output);this.info.multipleOutputs&&(this.multipleOutputs=this.info.multipleOutputs,
this.info.output||this.setOutput(!0))};Blockly.ComputerCraft.Block.prototype.generateDropdownCode=function(a){goog.asserts.fail("generateDropdownCode() must be overridden.")};
Blockly.ComputerCraft.Block.prototype.generateLuaInner_=function(){var a=[],b=this;this.getOrderedParameterNames().forEach(function(c){var d=b.getInput(c);d?(goog.asserts.assert(d.type==Blockly.INPUT_VALUE),a.push(Blockly.Lua.valueToCode(b,d.name,Blockly.Lua.ORDER_NONE))):(d=b.getTitle_(c),goog.asserts.assert(d,"Unable to find input or title named "+c),goog.asserts.assert(d instanceof Blockly.FieldDropdown,"Only value inputs and dropdowns are currently supported."),(c=b.generateDropdownCode(d))&&
a.push(c))});return this.getFuncName()+"("+a.join(", ")+")"};Blockly.ComputerCraft.Block.prototype.generateLua=function(){var a=this.generateLuaInner_();return this.outputConnection?[a,Blockly.Lua.ORDER_HIGH]:a+"\n"};Blockly.ComputerCraft.Block.disallowArgTitle_=function(a,b){a&&a.forEach(function(a){goog.asserts.assert(!b.exec(a[0]),"Illegal argument name "+a[0])})};ComputerCraft.ValueBlock={};Blockly.ComputerCraft.ValueBlock=function(a,b,c){c.args||(c.args=[]);c.text&&(c.text=c.text.trim());c.expStmt&&goog.asserts.assert(c.output,"If info.expStmt is true, info.output must be set.");Blockly.ComputerCraft.ValueBlock.superClass_.constructor.call(this,a,b,c)};goog.inherits(Blockly.ComputerCraft.ValueBlock,Blockly.ComputerCraft.Block);
Blockly.ComputerCraft.buildDynamicHelpUrl_=function(a,b){return Blockly.ComputerCraft.BASE_HELP_URL+a.prefix.charAt(0).toUpperCase()+a.prefix.slice(1)+"."+a.getTitleValue(a.info.ddFuncName)};
Blockly.ComputerCraft.ValueBlock.prototype.init=function(a){if(this.info.helpUrlType==Blockly.ComputerCraft.HelpUrlType.PREFIX_DD){var b=this;this.setHelpUrl(function(){return Blockly.ComputerCraft.buildDynamicHelpUrl_(b,b.info.ddFuncName)})}Blockly.ComputerCraft.Block.prototype.init.call(this);var c=[];c.push(this.info.text);if(a=a||this.info.args)for(var d=0;d<a.length;d++){var e=[];e.push(a[d][0]);if(a[d][1]instanceof Blockly.FieldDropdown){var f=a[d][1].clone();f.prefixTitle=a[d][1].prefixTitle;
f.suffixTitle=a[d][1].suffixTitle;e.push(f)}else e.push(a[d][1]);e.push(Blockly.ALIGN_RIGHT);c.push(e)}c.push(Blockly.ALIGN_RIGHT);Blockly.Block.prototype.interpolateMsg.apply(this,c)};Blockly.ComputerCraft.ValueBlock.prototype.generateDropdownCode=function(a){return a.name==this.info.ddFuncName?null:this.info.quoteDropdownValues||"undefined"==typeof this.info.quoteDropdownValues?"'"+a.value_+"'":a.value};
Blockly.ComputerCraft.buildValueBlock=function(a,b,c){c.helpUrlType||(c.helpUrlType=Blockly.ComputerCraft.HelpUrlType.PREFIX_NAME);a=new Blockly.ComputerCraft.ValueBlock(a,b,c);Blockly.Blocks[a.blockName]=a;c.suppressLua||(Blockly.Lua[a.blockName]=Blockly.ComputerCraft.Block.prototype.generateLua);return a};
Blockly.ComputerCraft.ValueBlock.prototype.changeModes=function(a){goog.asserts.assert(this.info.expStmt,"changeModes() should only be called if this.info.expStmt.");this.unplug(!0,!0);a?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0),this.isStatement=!0):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0),this.isStatement=!1)};
Blockly.ComputerCraft.ValueBlock.prototype.customContextMenu=function(a){if(this.info.expStmt){var b={enabled:!0};b.text=this.isStatement?"Add Output":"Remove Output";var c=this;b.callback=function(){c.changeModes(!c.isStatement)};a.push(b)}};Blockly.ComputerCraft.ValueBlock.prototype.mutationToDom=function(){if(this.info.expStmt){var a=document.createElement("mutation");a.setAttribute("is_statement",this.isStatement||!1);return a}};
Blockly.ComputerCraft.ValueBlock.prototype.domToMutation=function(a){this.info.expStmt&&this.changeModes("true"==a.getAttribute("is_statement"))};Blockly.ComputerCraft.ValueBlock.prototype.getFuncName=function(){return this.prefix+"."+(this.info.ddFuncName?this.getTitleValue(this.info.ddFuncName):this.info.funcName)};Blockly.ComputerCraft.ValueBlock.prototype.getOrderedParameterNames=function(){return this.info.args.map(function(a){return a[0]})};
Blockly.ComputerCraft.ValueBlock.SIDES=[["left","left"],["right","right"],["front","front"],["back","back"],["top","top"],["bottom","bottom"]];Blockly.ComputerCraft.REDSTONE_BLOCK_COLOUR_=290;
Blockly.ComputerCraft.REDSTONE_FUNCS_=[{funcName:"getSides",text:"get sides",output:"Table",tooltip:"Get a table whose values are the names of the sides\n(top, bottom, left, right, front, and back) through\nwhich RedPower cables and redstone could be connected."},{blockName:"get_input",text:"get %1 redstone signal through %2",args:[["OPTION",new Blockly.FieldDropdown([["digital","getInput"],["analog","getAnalogInput"]],function(a){this.sourceBlock_.changeOutput("getInput"==a?"Boolean":"Number")})],
["SIDE",new Blockly.FieldDropdown(Blockly.ComputerCraft.ValueBlock.SIDES)]],ddFuncName:"OPTION",output:"Boolean",tooltip:'Get the redstone signal from the cable on the specified side.\nDigital signals are either of the boolean values "true" or "false".\nAnalog signals are in the numeric range 0-15.'},{blockName:"set_output",text:"output %1 signal %3 through %2",args:[["OPTION",new Blockly.FieldDropdown([["digital","setOutput"],["analog","setAnalogOutput"]],function(a){this.sourceBlock_.getInput("SIGNAL").setCheck("setOutput"==
a?"Boolean":"Number")})],["SIDE",new Blockly.FieldDropdown(Blockly.ComputerCraft.ValueBlock.SIDES)],["SIGNAL","Boolean"]],ddFuncName:"OPTION",tooltip:'Output the specified signal through an attached redstone cable.\nDigital signals are either of the boolean values "true" or "false".\nAnalog signals are numbers in the range 0-15.'},{blockName:"get_bundled_input",text:"get %1 colours on bundled cable on %2",args:[["OPTION",new Blockly.FieldDropdown([["all","getBundledInput"],["activated","getBundledOutput"]])],
["SIDE",new Blockly.FieldDropdown(Blockly.ComputerCraft.ValueBlock.SIDES)]],ddFuncName:"OPTION",output:"Number",tooltip:"Get the set of colours either present (all) or activated\non a RedPower bundled cable connected on the specified side."},{funcName:"setBundledOutput",text:"activate colours %2 on bundled cable on %1",args:[["SIDE",new Blockly.FieldDropdown(Blockly.ComputerCraft.ValueBlock.SIDES)],["COLOURS","Number"]],tooltip:'Activate the specified coloured wires in the attached bundled cable.\nThe colour input may be an individual colour, the sum of colours, or\na set of colours, created with the "combine" block in the "Colours" drawer.'},
{funcName:"testBundledInput",text:"is colour %2 active on bundled cable on %1?",args:[["SIDE",new Blockly.FieldDropdown(Blockly.ComputerCraft.ValueBlock.SIDES)],["COLOURS","Number"]],output:"Boolean",tooltip:'Has the value "true" if the specified colour is\nactive in the attached bundled cable; otherwise, false.'}];Blockly.ComputerCraft.REDSTONE_FUNCS_.forEach(function(a){Blockly.ComputerCraft.buildValueBlock("redstone",Blockly.ComputerCraft.REDSTONE_BLOCK_COLOUR_,a)});Blockly.ComputerCraft.TERM_BLOCK_COLOUR_=160;
Blockly.ComputerCraft.TERM_FUNCS_=[{funcName:"write",text:"write %1 to screen",args:[["Text","String"]],tooltip:"Write the given string to the screen (terminal or monitor)."},{funcName:"clear",text:"clear screen",tooltip:"Clear the entire screen (terminal or monitor)."},{funcName:"clearLine",text:"clear line on screen",tooltip:"Clear the line the cursor is on."},{funcName:"getCursorPos",text:"get cursor position",output:"Number",tooltip:"Get the x and y coodinates of the cursor.",multipleOutputs:2},
{funcName:"setCursorPos",text:"set cursor position to (%1, %2)",args:[["X","Number"],["Y","Number"]],tooltip:"Set the x and y coodinates, respecitvely, of the cursor."},{funcName:"isColor",text:"computer supports colour?",output:"Boolean",tooltip:"Return true if the computer supports colour, false otherwise.\nThis indicates whether an Advanced Computer is being used."},{funcName:"getSize",text:"get width and height of screen",output:"Number",multipleOutputs:2,tooltip:"Get the maximum x-coordinate (width) and y-coordinate (height)\nof the screen (terminal or monitor)"},
{funcName:"scroll",text:"scroll the screen %1 line(s)",args:[["NUM","Number"]],tooltip:"Scroll the screen (terminal or monitor)\nthe specified number of lines."},{funcName:"redirect",text:"redirect display to %1",args:[["TERM","Peripheral"]],tooltip:'Redirect terminal output to a monitor or other redirect target.\nThe input is usually the output of "wrap peripheral"\nDisplay can be restored to the original with the "restore display" block.'},{funcName:"restore",text:"restore display",tooltip:'Restore the display to the previous target, \nafter changing it with the "redirect display" block.'},
{funcName:"setTextColor",text:"set text colour to %1",args:[["COLOUR",["Colour","Number"]]],tooltip:"Set the text colour of the terminal.\nThis is only available for Advanced Computers\nand Advanced Monitors."},{funcName:"setBackgroundColor",text:"set background colour to %1",args:[["COLOUR",["Colour","Number"]]],tooltip:"Set the background colour of the screen.\nThis is only available for Advanced Computers\nand Advanced Monitors."},{funcName:"setTextScale",text:"scale text by %1",args:[["SCALE",
"Number"]],tooltip:"Set the size of all text on the connected monitor.\nThe input must be a multiple of .5 between .5 and 5 (inclusive).\nThis is only available on monitors, not terminals."}];Blockly.ComputerCraft.TERM_FUNCS_.forEach(function(a){Blockly.ComputerCraft.buildValueBlock("term",Blockly.ComputerCraft.TERM_BLOCK_COLOUR_,a)});
Blockly.Blocks.term_set_text_scale.onchange=function(){if(this.workspace)if(!this.childBlocks_)this.setWarningText(null);else if(Blockly.selected!=this.childBlocks_[0]){var a=Blockly.Lua.valueToCode(this,"SCALE",Blockly.Lua.ORDER_NONE);if(a&&(a=Number(a),NaN!=a&&(2*a!=Math.floor(2*a)||.5>a||5<a))){this.setWarningText("The scale value must be a multiple of .5 in the range .5 to 5.");return}this.setWarningText(null)}};
Blockly.Blocks.term_set_cursor_blink=new Blockly.ComputerCraft.Block("term",Blockly.ComputerCraft.TERM_BLOCK_COLOUR_,{funcName:"setCursorBlink",helpUrlType:Blockly.ComputerCraft.HelpUrlType.PREFIX_NAME,tooltip:"Enable or disable blinking of the\ncursor on a screen (terminal or monitor)."});
Blockly.Blocks.term_set_cursor_blink.init=function(){Blockly.ComputerCraft.Block.prototype.init.call(this);this.appendDummyInput().appendTitle(new Blockly.FieldDropdown([["turn on cursor blinking","true"],["turn off cursor blinking","false"]]),"STATUS")};Blockly.Lua.term_set_cursor_blink=Blockly.ComputerCraft.generateLuaInner_;Blockly.ComputerCraft.buildDependentInputBlock("test",200,{funcName:"vote",text:"Vote for %1: %2 %3",args:[["OFFICE",[["President","president"],["Vice President","vp"]]],["CANDIDATE*",[["George Washington","washington*"],["Abraham Lincoln","lincoln"],["write-in candidate","writein"]]],["WRITE_IN^","String"]]});
Blockly.ComputerCraft.buildDependentInputBlock("test",200,{funcName:"count",text:"%1 %2",args:[["ENABLE*",[["Disable dependent input","disable"],["Enable dependent input","enable*"]]],["AMOUNT^","Number"]],addChild:Blockly.ComputerCraft.InputAddType.FIRST});Blockly.ComputerCraft.buildVarArgsBlock("test",200,{blockName:"varargs",funcName:"giveMeMore",text:"give me more %v",varArgName:"argument",varArgType:"String",varContainerName:"arguments"});ComputerCraft.DependentInputBlock={};Blockly.ComputerCraft.InputAddType={NEVER:0,FIRST:1,ALL:2};Blockly.ComputerCraft.ControllingInputCodeGenType={NEVER:0,ALWAYS:1,ONLY_IF_DEP_HIDDEN:2};Blockly.ComputerCraft.DependentInputBlock=function(a,b,c){Blockly.ComputerCraft.DependentInputBlock.superClass_.constructor.call(this,a,b,c);"undefined"==typeof c.addChild&&(c.addChild=Blockly.ComputerCraft.InputAddType.FIRST);"undefined"==typeof c.codeGenType&&(c.codeGenType=Blockly.ComputerCraft.ControllingInputCodeGenType.NEVER)};
goog.inherits(Blockly.ComputerCraft.DependentInputBlock,Blockly.ComputerCraft.ValueBlock);Blockly.ComputerCraft.DependentInputBlock.DD_MARKER="*";Blockly.ComputerCraft.DependentInputBlock.DEP_MARKER="^";
Blockly.ComputerCraft.DependentInputBlock.setDependenceInfo_=function(a){if(!a.ddName&&!a.depName)for(var b=Blockly.ComputerCraft.DependentInputBlock.DD_MARKER,c=Blockly.ComputerCraft.DependentInputBlock.DEP_MARKER,d=0;d<a.args.length;d++){var e=a.args[d],f=e[0];if(f)if(f.charAt(f.length-1)==b){goog.asserts.assert(!a.ddName,"info.ddName is being redefined.");e[0]=f.slice(0,-1);a.ddName=e[0];for(f=0;f<e[1].length;f++){var g=e[1][f],h=g[1];h.charAt(h.length-1)==b&&(goog.asserts.assert(!a.ddValue,"info.ddValue is being redefined."),
g[1]=h.slice(0,-1),a.ddValue=g[1])}goog.asserts.assert(a.ddValue,"No enabling value was found in dropdown ",a.ddName)}else f.charAt(f.length-1)==c&&(goog.asserts.assert(!a.depName,"info.depName is being redefined."),e[0]=f.slice(0,-1),a.depName=e[0],goog.asserts.assert("string"==typeof e[1],"Dependent inputs must be simple types."),a.depType=e[1])}a.ddName?goog.asserts.assert(a.depName,"A controlling dropdown menu was defined but not a dependent input."):goog.assert.assert(!a.depName,"A dependent input was defined but not a controlling dropdown menu.")};
Blockly.ComputerCraft.buildDependentInputBlock=function(a,b,c){Blockly.ComputerCraft.DependentInputBlock.setDependenceInfo_(c);a=new Blockly.ComputerCraft.DependentInputBlock(a,b,c);Blockly.Blocks[a.blockName]=a;c.suppressLua||(Blockly.Lua[a.blockName]=Blockly.ComputerCraft.generateLua);return a};
Blockly.ComputerCraft.DependentInputBlock.prototype.init=function(){for(var a=[],b=0;b<this.info.args.length;b++){var c=this.info.args[b];if("string"==typeof c[1])a.push(c),c[0]==this.info.depName&&-1==this.info.text.indexOf("%0")&&(this.info.text=this.info.text.replace(new RegExp("%"+(b+1)+"(?=(\\D|$))"),"%0 "+(this.info.depTitle||"")+" %"+(b+1)));else{var d=[];d[0]=c[0];if(d[0]==this.info.ddName){var e=this;d[1]=new Blockly.FieldDropdown(c[1],function(a){a==e.info.ddValue?e.dependentInputShown||
Blockly.ComputerCraft.DependentInputBlock.showDependentInput_(e,!0):e.dependentInputShown&&Blockly.ComputerCraft.DependentInputBlock.removeDependentInput_(e)})}else d[1]=new Blockly.FieldDropdown(c[1]);a.push(d)}}Blockly.ComputerCraft.ValueBlock.prototype.init.call(this,a);for(b=0;b<this.inputList.length;b++)this.inputList[b].name==this.info.depName&&(this.depPos=b);goog.asserts.assert("number"==typeof this.depPos,"Dependent input "+this.info.depName+" could not be found.");this.getTitleValue(this.info.ddName)==
this.info.ddValue?this.dependentInputShown=!0:Blockly.ComputerCraft.DependentInputBlock.removeDependentInput_(this)};
Blockly.ComputerCraft.DependentInputBlock.showDependentInput_=function(a,b){var c=a.appendValueInput(a.info.depName).setCheck(a.info.depType);a.info.depTitle&&c.appendTitle(a.info.depTitle);a.moveNumberedInputBefore(a.inputList.length-1,a.depPos);if(b&&a.info.addChild){goog.asserts.assert("String"==a.info.depType||"Number"==a.info.depType,"When addChild is true, depType must be String or Number, not "+a.info.depType);var d=new Blockly.Block(a.workspace,"String"==a.info.depType?"text":"math_number");
d.initSvg();d.render();c.connection.connect(d.outputConnection);a.info.addChild==Blockly.ComputerCraft.InputAddType.FIRST&&(a.info.addChild=Blockly.ComputerCraft.InputAddType.NEVER)}a.dependentInputShown=!0};Blockly.ComputerCraft.DependentInputBlock.removeDependentInput_=function(a){a.removeInput(a.info.depName);a.dependentInputShown=!1};
Blockly.ComputerCraft.DependentInputBlock.prototype.mutationToDom=function(){var a=document.createElement("mutation");a.setAttribute("dependent_input",this.dependentInputShown);a.setAttribute("add_child",this.info.addChild);return a};
Blockly.ComputerCraft.DependentInputBlock.prototype.domToMutation=function(a){var b=a.getAttribute("dependent_input")||a.getAttribute("cable_mode");"true"!=b||this.dependentInputShown||Blockly.ComputerCraft.DependentInputBlock.showDependentInput_(this,!1);if(b=a.getAttribute("add_child"))this.info.addChild=parseInt(b)};
Blockly.ComputerCraft.DependentInputBlock.prototype.generateDropdownCode=function(a){if(a.name==this.info.ddName){var b=Blockly.ComputerCraft.ControllingInputCodeGenType;if(this.info.codeGenType==b.NEVER)return null;if(this.info.codeGenType==b.ONLY_IF_DEP_HIDDEN){if(a.value_==this.info.ddValue)return null}else goog.asserts.assert(block.info.codeGenType==b.ALWAYS,"Illegal value for info.codeGenType: ",block.info.codeGenType)}return Blockly.ComputerCraft.ValueBlock.prototype.generateDropdownCode.call(this,
a)};ComputerCraft.SideInputBlock={};Blockly.ComputerCraft.SideInputBlock=function(a,b,c){c.codeGenType=Blockly.ComputerCraft.ControllingInputCodeGenType.ONLY_IF_DEP_HIDDEN;Blockly.ComputerCraft.SideInputBlock.superClass_.constructor.call(this,a,b,c)};goog.inherits(Blockly.ComputerCraft.SideInputBlock,Blockly.ComputerCraft.DependentInputBlock);
Blockly.ComputerCraft.SideInputBlock.SIDES_=[["in front","front"],["in back","back"],["to the left","left"],["to the right","right"],["above","top"],["below","bottom"],["through cable...","cable"]];
Blockly.ComputerCraft.buildSideInputBlock=function(a,b,c){c.helpUrlType||(c.helpUrlType=Blockly.ComputerCraft.HelpUrlType.PREFIX_NAME);c.args||(c.args=[]);c.text+=" %"+(c.args.length+1)+" %"+(c.args.length+2);c.args.push(["SIDE",Blockly.ComputerCraft.SideInputBlock.SIDES_]);c.args.push(["CABLE","String"]);c.ddName="SIDE";c.ddValue="cable";c.depName="CABLE";c.depType="String";"Boolean"==c.output&&(c.text+="?");a=new Blockly.ComputerCraft.SideInputBlock(a,b,c);Blockly.Blocks[a.blockName]=a;c.suppressLua||
(Blockly.Lua[a.blockName]=Blockly.ComputerCraft.Block.prototype.generateLua);return a};Blockly.ComputerCraft.PERIPHERAL_BLOCK_COLOUR_=65;
Blockly.ComputerCraft.PERIPHERAL_FUNCS_=[{funcName:"isPresent",output:"Boolean",text:"is peripheral present",tooltip:"Return true if a peripheral is connected on the specified side."},{funcName:"getType",output:"String",text:"get type of peripheral",tooltip:"Return the type of the connected peripheral or nil if none present"},{funcName:"getMethods",output:"List",text:"get method names of peripheral",tooltip:"Return a list of the names of the connected peripheral's methods,\nor nil if no peripheral is connected."},{funcName:"wrap",
output:"List",text:"wrap peripheral",tooltip:"Return the connected peripheral's methods so they can be called,\nor nil if no peripheral is connected."}];Blockly.ComputerCraft.PERIPHERAL_FUNCS_.forEach(function(a){Blockly.ComputerCraft.buildSideInputBlock("peripheral",Blockly.ComputerCraft.PERIPHERAL_BLOCK_COLOUR_,a)});
Blockly.ComputerCraft.buildValueBlock("peripheral",Blockly.ComputerCraft.PERIPHERAL_BLOCK_COLOUR_,{funcName:"getNames",output:"List",text:"get names of connected peripherals",args:[],tooltip:"Returns the names of any peripherals connected\ndirectly or through a wired modem."});
Blockly.ComputerCraft.buildSideInputBlock("peripheral",Blockly.ComputerCraft.PERIPHERAL_BLOCK_COLOUR_,{funcName:"call",text:"call method %1 on peripheral",args:[["METHOD","String"]],tooltip:"Calls a method on a connected peripheral.\nClick on the star to add parameters.",helpUrlType:Blockly.ComputerCraft.HelpUrlType.PREFIX_DIR});
Blockly.Blocks.peripheral_call.init=function(){Blockly.ComputerCraft.SideInputBlock.prototype.init.call(this);this.setMutator(new Blockly.Mutator(["peripheral_mutatorarg"]));this.arguments_=[]};
Blockly.Blocks.peripheral_call.decompose=function(a){var b=new Blockly.Block(a,"peripheral_mutatorcontainer");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.arguments_.length;d++){var e=new Blockly.Block(a,"peripheral_mutatorarg");e.initSvg();e.setTitleValue(this.arguments_[d],"NAME");e.oldLocation=d;c.connect(e.previousConnection);c=e.nextConnection}return b};
Blockly.Blocks.peripheral_mutatorcontainer={init:function(){this.setColour(Blockly.ComputerCraft.PERIPHERAL_BLOCK_COLOUR_);this.appendDummyInput().appendTitle("arguments");this.appendStatementInput("STACK");this.setTooltip("");this.contextMenu=!1}};
Blockly.Blocks.peripheral_mutatorarg={init:function(){this.setColour(Blockly.ComputerCraft.PERIPHERAL_BLOCK_COLOUR_);this.appendDummyInput().appendTitle("argument").appendTitle(new Blockly.FieldTextInput("x",this.validator),"NAME");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip("");this.contextMenu=!1},validator:function(a){return(a=a.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""))||null}};
Blockly.Blocks.peripheral_call.updateParams_=function(a){for(var b=!1,c={},d=0;d<this.arguments_.length;d++){if(c["arg_"+this.arguments_[d].toLowerCase()]){b=!0;break}c["arg_"+this.arguments_[d].toLowerCase()]=!0}b?this.setWarningText("Warning: This call has duplicate input (argument) names."):this.setWarningText(null);for(d=1;this.getInput("PARAM"+d);)this.removeInput("PARAM"+d),d++;for(d=1;d<=this.arguments_.length;d++)b=this.appendValueInput("PARAM"+d).appendTitle(this.arguments_[d-1]),a&&a.valueConnection_&&
(b.connection.connect(a.valueConnection_),a=a.nextConnection&&a.nextConnection.targetBlock())};Blockly.Blocks.peripheral_call.compose=function(a){this.arguments_=[];for(var b=a.getInputTargetBlock("STACK");b;)this.arguments_.push(b.getTitleValue("NAME")),b=b.nextConnection&&b.nextConnection.targetBlock();this.updateParams_(a.getInputTargetBlock("STACK"))};
Blockly.Blocks.peripheral_call.saveConnections=function(a){a=a.getInputTargetBlock("STACK");for(var b=1;a;){var c=this.getInput("PARAM"+b);a.valueConnection_=c&&c.connection.targetConnection;a=a.nextConnection&&a.nextConnection.targetBlock();b++}};Blockly.Blocks.peripheral_call.mutationToDom=function(){for(var a=Blockly.ComputerCraft.SideInputBlock.prototype.mutationToDom.call(this),b=0;b<this.arguments_.length;b++){var c=document.createElement("arg");c.setAttribute("name",this.arguments_[b]);a.appendChild(c)}return a};
Blockly.Blocks.peripheral_call.domToMutation=function(a){Blockly.ComputerCraft.SideInputBlock.prototype.domToMutation.call(this,a);this.arguments_=[];for(var b=0,c;c=a.childNodes[b];b++)"arg"==c.nodeName.toLowerCase()&&this.arguments_.push(c.getAttribute("name"));this.updateParams_(null)};Blockly.ComputerCraft.deprecatedOnChange=function(a){return function(){this.workspace&&this.setWarningText('This block has been deprecated.  Please replace it with the "'+a+'" block.')}};Blockly.Blocks.turtle_get_item_count={init:function(){this.setColour(Blockly.ComputerCraft.TURTLE_BLOCK_COLOUR_);this.appendValueInput("VALUE").setCheck("Number").appendTitle("get item count in slot");this.setOutput(!0,"Number");this.setTooltip("Get the count of items in the supplied slot number.")},onchange:Blockly.ComputerCraft.deprecatedOnChange("get [item count/free space] in slot")};
Blockly.Lua.turtle_get_item_count=function(a){return["turtle.getItemCount("+(Blockly.Lua.valueToCode(a,"VALUE",Blockly.Lua.ORDER_NONE)||"")+")",Blockly.Lua.ORDER_NONE]};Blockly.Blocks.turtle_get_item_space={init:function(){this.setColour(Blockly.ComputerCraft.TURTLE_BLOCK_COLOUR_);this.appendValueInput("VALUE").setCheck("Number").appendTitle("get free space in slot");this.setOutput(!0,"Number");this.setTooltip("Get the number of items that can be placed in the numbered slot.")},onchange:Blockly.ComputerCraft.deprecatedOnChange("get [item count/free space] in slot")};
Blockly.Lua.turtle_get_item_space=function(a){return["turtle.getItemSpace("+(Blockly.Lua.valueToCode(a,"VALUE",Blockly.Lua.ORDER_NONE)||"")+")",Blockly.Lua.ORDER_NONE]};
// Copyright 2012 Google Inc.  Apache License 2.0
Blockly.Blocks.variables={};Blockly.Blocks.variables.HUE=330;
Blockly.Blocks.variables_get={init:function(){this.setHelpUrl(Blockly.Msg.VARIABLES_GET_HELPURL);this.setColour(Blockly.Blocks.variables.HUE);this.appendDummyInput().appendField(new Blockly.FieldVariable(Blockly.Msg.VARIABLES_DEFAULT_NAME),"VAR");this.setOutput(!0);this.setTooltip(Blockly.Msg.VARIABLES_GET_TOOLTIP);this.contextMenuMsg_=Blockly.Msg.VARIABLES_GET_CREATE_SET},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&
this.setFieldValue(b,"VAR")},contextMenuType_:"variables_set",customContextMenu:function(a){var b={enabled:!0},c=this.getFieldValue("VAR");b.text=this.contextMenuMsg_.replace("%1",c);c=goog.dom.createDom("field",null,c);c.setAttribute("name","VAR");c=goog.dom.createDom("block",null,c);c.setAttribute("type",this.contextMenuType_);b.callback=Blockly.ContextMenu.callbackFactory(this,c);a.push(b)}};
Blockly.Blocks.variables_set={init:function(){this.jsonInit({message0:Blockly.Msg.VARIABLES_SET,args0:[{type:"field_variable",name:"VAR",variable:Blockly.Msg.VARIABLES_DEFAULT_NAME},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,colour:Blockly.Blocks.variables.HUE,tooltip:Blockly.Msg.VARIABLES_SET_TOOLTIP,helpUrl:Blockly.Msg.VARIABLES_SET_HELPURL});this.contextMenuMsg_=Blockly.Msg.VARIABLES_SET_CREATE_GET},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,
b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,"VAR")},contextMenuType_:"variables_get",customContextMenu:Blockly.Blocks.variables_get.customContextMenu};ComputerCraft.VarArgsBlock={};Blockly.ComputerCraft.VarArgsBlock=function(a,b,c){Blockly.ComputerCraft.Block.disallowArgTitle_(c.args,Blockly.ComputerCraft.VarArgsBlock.INPUT_NAME_REGEX_);goog.asserts.assert(c.varArgName,"this.info.varArgName should have name of the mutator arg.");Blockly.ComputerCraft.VarArgsBlock.superClass_.constructor.call(this,a,b,c)};goog.inherits(Blockly.ComputerCraft.VarArgsBlock,Blockly.ComputerCraft.ValueBlock);Blockly.ComputerCraft.VarArgsBlock.INPUT_NAME_REGEX_=/^ARG\d+$/;
Blockly.ComputerCraft.VarArgsBlock.prototype.addVarArg=function(a){var b=this.appendValueInput("ARG"+a).setCheck(this.info.varArgType);1==a&&this.info.varArgTitle&&b.appendTitle(this.info.varArgTitle);this.moveNumberedInputBefore(this.inputList.length-1,this.info.varArgPos+a-1);return b};
Blockly.ComputerCraft.VarArgsBlock.prototype.init=function(){this.info.text=this.info.text.replace("%v","%0");Blockly.ComputerCraft.ValueBlock.prototype.init.call(this);for(var a=0;this.inputList[a].type!=Blockly.DUMMY_INPUT;)a++;this.info.varArgPos=a+1;this.info.varArgCount=this.info.varArgCount||0;for(a=1;a<=this.info.varArgCount;a++)this.addVarArg(a);var b=this;Blockly.Blocks[this.blockName+"_mutator_arg"]={init:function(){this.setColour(b.colour);var a=this.appendDummyInput().appendTitle(new Blockly.FieldLabel(b.info.varArgName));
b.info.varArgField&&a.appendTitle(b.info.varArgField.clone());this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(b.info.varArgTooltip||"");this.contextMenu=!1}};Blockly.Blocks[this.blockName+"_mutator_container"]={init:function(){this.setColour(b.colour);this.appendDummyInput().appendTitle(b.info.varContainerName||"");this.appendStatementInput("STACK");this.setTooltip(b.info.varContainerTooltip||"");this.contextMenu=!1}};this.setMutator(new Blockly.Mutator([this.blockName+"_mutator_arg"]))};
Blockly.ComputerCraft.VarArgsBlock.prototype.decompose=function(a){var b=new Blockly.Block(a,this.blockName+"_mutator_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=1;d<=this.info.varArgCount;d++){var e=new Blockly.Block(a,this.blockName+"_mutator_arg");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b};
Blockly.ComputerCraft.VarArgsBlock.prototype.compose=function(a){for(var b=1;b<=this.info.varArgCount;b++)this.removeInput("ARG"+b);a=a.getInputTargetBlock("STACK");for(b=1;a;){var c=this.addVarArg(b);a.valueConnection_&&c.connection.connect(a.valueConnection_);a=a.nextConnection&&a.nextConnection.targetBlock();b+=1}this.info.varArgCount=b-1};
Blockly.ComputerCraft.VarArgsBlock.prototype.saveConnections=function(a){a=a.getInputTargetBlock("STACK");for(var b=1;a;){var c=this.getInput("ARG"+b);a.valueConnection_=c&&c.connection.targetConnection;a=a.nextConnection&&a.nextConnection.targetBlock();b++}};Blockly.ComputerCraft.VarArgsBlock.prototype.mutationToDom=function(){var a=document.createElement("mutation");this.info.varArgCount&&a.setAttribute("var_arg_count",this.info.varArgCount);return a};
Blockly.ComputerCraft.VarArgsBlock.prototype.domToMutation=function(a){this.info.varArgCount=parseInt(a.getAttribute("var_arg_count"),10);for(a=1;a<=this.info.varArgCount;a++)this.getInput("ARG"+a)||(this.appendValueInput("ARG"+a).setCheck(this.info.varArgType),this.moveNumberedInputBefore(this.inputList.length-1,this.info.varArgPos+a-1))};
Blockly.ComputerCraft.buildVarArgsBlock=function(a,b,c){a=new Blockly.ComputerCraft.VarArgsBlock(a,b,c);Blockly.Blocks[a.blockName]=a;Blockly.Lua[a.blockName]=Blockly.ComputerCraft.Block.prototype.generateLua;return a};Blockly.ComputerCraft.VarArgsBlock.prototype.getOrderedParameterNames=function(){for(var a=Blockly.ComputerCraft.ValueBlock.prototype.getOrderedParameterNames.call(this),b=1;b<=this.info.varArgCount;b++)a.push("ARG"+b);return a};Blockly.ComputerCraft.OS_BLOCK_COLOUR_=30;
Blockly.ComputerCraft.OS_FUNCS_=[{funcName:"terminate",stmtConns:Blockly.ComputerCraft.StmtConns.PREVIOUS,text:"terminate with error %1",args:[["MSG",null]],tooltip:"End the program with the provided error message.  This should not be used for normal termination."},{funcName:"sleep",text:"sleep %1 seconds",args:[["VALUE","Number"]],tooltip:"Sleep for the specified number of seconds."},{funcName:"version",text:"get OS version",output:"String",tooltip:"Get the name of the version of CraftOS being used."},{funcName:"getComputerID",
text:"get computer ID",output:"Number",tooltip:"Get the unique numeric ID of this computer."},{funcName:"getComputerLabel",text:"get computer label",output:"String",tooltip:'Get the label of this computer.\nThe label can be set with "set computer label".'},{funcName:"setComputerLabel",text:"set computer label to %1",args:[["LABEL","String"]],tooltip:'Set the label of this computer.\nThe label can be read with "get computer label".'},{blockName:"api",text:"%1 API %2",args:[["OPTION",new Blockly.FieldDropdown([["load",
"loadAPI"],["unload","unloadAPI"]])],["NAME","String"]],ddFuncName:"OPTION",tooltip:"Load or unload a Lua script as an API in its own namespace."},{funcName:"clock",text:"get running time",output:"Number",tooltip:"Get the amount of time this computer has been running, in seconds."},{funcName:"setAlarm",text:"set alarm for %1 s",args:[["TIME","Number"]],output:"Table",tooltip:"Queue an alarm event to occur after the specified number of seconds.\nThe ID of the alarm, which is a table, is returned."},
{funcName:"time_day",ddFuncName:"OPTION",text:"get in-game %1",args:[["OPTION",new Blockly.FieldDropdown([["time","time"],["day","day"]])]],output:"Number",tooltip:'Get the current in-game time or day.\nTime can be converted into a string with\nthe "format time" block in Text Utilities.\nDay is the number of days since the world creation.'},{funcName:"shutdown",text:"shut down computer",tooltip:"Turn off this computer."},{funcName:"reboot",text:"reboot computer",tooltip:"Reboot this computer."},{funcName:"startTimer",
text:"start timer for %1 s",args:[["TIME","Number"]],output:"Number",expStmt:!0,tooltip:"Queue a timer event to occur after\nthe specified number of seconds.\nThe ID of the timer is returned."}];Blockly.ComputerCraft.OS_FUNCS_.forEach(function(a){Blockly.ComputerCraft.buildValueBlock("os",Blockly.ComputerCraft.OS_BLOCK_COLOUR_,a)});Blockly.Blocks.terminate=Blockly.Blocks.os_terminate;Blockly.Lua.terminate=Blockly.Lua.os_terminate;
Blockly.ComputerCraft.buildVarArgsBlock("os",Blockly.ComputerCraft.OS_BLOCK_COLOUR_,{funcName:"queueEvent",text:"queue event %1 %v",args:[["EVENT","String"]],varArgName:"name",varArgType:!0,varArgTooltip:"A parameter to pass to the event.",varArgTitle:"with parameters",varArgCount:1,varContainerName:"parameters",varContainerTitle:"Add, remove, or reorder parameters to pass to the event.",tooltip:"Add an event to the event queue with the given name and parameters."});
Blockly.ComputerCraft.buildDependentInputBlock("os",Blockly.ComputerCraft.OS_BLOCK_COLOUR_,{funcName:"pullEvent",text:"pull %1 %2",output:"String Number Colour Table Vector Function".split(" "),multipleOutputs:Infinity,args:[["OPTION*",[["any event","any"],["named event","named*"],["raw event","raw"]]],["EVENT^","String"]],suppressLua:!0,tooltip:'Block until the computer receives an event,\noutputting the name of the event and its parameters.\nThe "terminate" event is only caught in raw mode.'});
Blockly.Lua.os_pull_event=function(a){var b=a.generateLua();"raw"==a.getTitleValue("OPTION")&&(b[0]=b[0].replace("pullEvent","pullEventRaw"));return b};
Blockly.ComputerCraft.buildVarArgsBlock("os",Blockly.ComputerCraft.OS_BLOCK_COLOUR_,{funcName:"run",text:"run program %2 with environment %1 %v",args:[["ENV","Table"],["PATH","String"]],varArgName:"parameter",varArgType:!0,varArgTooltip:"A parameter to pass to the program.",varArgTitle:"and parameters",varArgCount:1,varContainerName:"parameters",varContainerTooltip:"Add, remove, or reorder parameters.",tooltip:"Run the program at the specified path with the given\nenvironment table.  Providing parameters is optional.\nParameters can be added or removed by clicking on the star."});var Code={TABS_:["blocks","lua","xml"],selected:"blocks",hideTab:function(a){document.getElementById("tab_"+a).className="taboff";document.getElementById("content_"+a).style.visibility="hidden"},displayTab:function(a){Code.selected=a.replace("tab_","");document.getElementById(a).className="tabon";document.getElementById("content_"+Code.selected).style.visibility="visible";Code.renderContent();Blockly.fireUiEvent(window,"resize")},tabClick:function(a){if("tabon"==document.getElementById("tab_xml").className){var b=
document.getElementById("content_xml").value,c=null;try{c=Blockly.Xml.textToDom(b)}catch(g){if(!window.confirm("Error parsing XML:\n%1\n\nSelect 'OK' to abandon your changes or 'Cancel' to further edit the XML.".replace("%1",g)))return}c&&(Blockly.mainWorkspace.clear(),Blockly.Xml.domToWorkspace(Blockly.mainWorkspace,c))}for(var d in Code.TABS_)Code.hideTab(Code.TABS_[d]);if("tab_lua"==a){var e=Blockly.Lua.getUnconnectedBlock();e?warningText="This block is not properly connected to other blocks.":
(e=Blockly.Lua.getBlockWithWarning())&&(warningText="Please fix the warning on this block.");if(e){Code.displayTab("tab_blocks");document.getElementById("badBlockMsg").innerHTML=warningText;BlocklyApps.showDialog(document.getElementById("badBlockDiv"),null,!1,!0,{left:"25%",top:"5em"},BlocklyApps.stopDialogKeyDown);BlocklyApps.startDialogKeyDown();var f=function(){e.select();BlocklyApps.isDialogVisible_&&(window.setTimeout(function(){e.unselect()},150),window.setTimeout(f,300))};f();return}}"tab_lua!"==
a&&(a="tab_lua");Code.displayTab(a)},renderContent:function(){var a=document.getElementById("content_"+Code.selected);if("content_xml"==a.id){var a=document.getElementById("content_xml"),b=Blockly.Xml.workspaceToDom(Blockly.mainWorkspace),b=Blockly.Xml.domToPrettyText(b);a.value=b;a.focus()}else"content_lua"==a.id&&(b=Blockly.Lua.workspaceToCode(),a.textContent=b,"function"==typeof prettyPrintOne&&(b=a.innerHTML,b=prettyPrintOne(b,"lang-lua"),a.innerHTML=b))},init:function(){BlocklyApps.init();var a=
document.getElementById("toolbox");Blockly.inject(document.getElementById("content_blocks"),{path:"../../",toolbox:a});var b=document.getElementById("content_area");window.addEventListener("resize",function(a){a=BlocklyApps.getBBox_(b);for(var d in Code.TABS_){var e=document.getElementById("content_"+Code.TABS_[d]);e.style.top=a.y+"px";e.style.left=a.x+"px";e.style.height=a.height+"px";e.style.height=2*a.height-e.offsetHeight+"px";e.style.width=a.width+"px";e.style.width=2*a.width-e.offsetWidth+"px"}Blockly.Toolbox.width&&
(document.getElementById("tab_blocks").style.minWidth=Blockly.Toolbox.width-38+"px")},!1);BlocklyApps.loadBlocks("");"BlocklyStorage"in window&&BlocklyStorage.backupOnUnload();Code.tabClick("tab_"+Code.selected);Blockly.fireUiEvent(window,"resize");BlocklyApps.bindClick("trashButton",function(){Code.discard();Code.renderContent()});BlocklyApps.bindClick("pastebinButton",function(){0==Blockly.mainWorkspace.getTopBlocks(!1).length?window.alert("You should write a program before saving it to Pastebin."):
BlocklyApps.showDialog(document.getElementById("pastebinDiv"),this,!0,!0,{},null)})}};window.location.pathname.match(/readonly.html$/)?window.addEventListener("load",BlocklyApps.initReadonly):window.addEventListener("load",Code.init);Code.discard=function(){var a=Blockly.mainWorkspace.getAllBlocks().length;if(2>a||window.confirm("Delete all %1 blocks?".replace("%1",a)))Blockly.mainWorkspace.clear(),window.location.hash=""};Blockly.ComputerCraft.SHELL_BLOCK_COLOUR_=290;
Blockly.ComputerCraft.SHELL_FUNCS_=[{funcName:"exit",text:"exit program",tooltip:"Exit the current program, or the shell if no programs are running."},{blockName:"dir",text:"get directory",output:"String",tooltip:"Get the path to the current directory."},{funcName:"setDir",text:"set directory to %1",args:[["PATH","String"]],tooltip:"Set the working directory."},{funcName:"path",text:"get path",output:"String",tooltip:"Get a colon-separated string of the directories in the path."},{funcName:"setPath",
text:"set path to %1",args:[["PATH","String"]],tooltip:"Set the path to the colon-separated string."},{funcName:"resolve",text:"resolve %1 %2",args:[["CHOICE",new Blockly.FieldDropdown([["path","resolve"],["program","resolveProgram"]])],["PATH","String"]],ddFuncName:"CHOICE",tooltip:"Resolve the given local path or program to an absolute path."},{funcName:"aliases",output:"Table",text:"get aliases",tooltip:"Get a table containing the default aliases\nand any user-specified aliases.  The key of\neach entry is the alias name, and the value\nthe name of the associated program."},
{funcName:"programs",text:"get %1 files",output:"Table",args:[["FILES",new Blockly.FieldDropdown([["regular","false"],["all","true"]])]],quoteDropdownValues:!1,tooltip:'Get a table of files in the current directory and in rom/programs.\nFiles whose names start with a period will be shown if "all" is selected.'},{funcName:"getRunningProgram",text:"get running program",tooltip:"Get the path of the currently running shell or program.",output:"String"}];
Blockly.ComputerCraft.SHELL_FUNCS_.forEach(function(a){Blockly.ComputerCraft.buildValueBlock("shell",Blockly.ComputerCraft.SHELL_BLOCK_COLOUR_,a)});Blockly.ComputerCraft.buildDependentInputBlock("shell",Blockly.ComputerCraft.SHELL_BLOCK_COLOUR_,{blockName:"change_alias",text:"%1 %2 %3",args:[["OPTION*",[["set alias","setAlias*"],["clear alias","clearAlias"]]],["ALIAS","String"],["VALUE^","String"]],depTitle:"to",ddFuncName:"OPTION"});
Blockly.ComputerCraft.buildVarArgsBlock("shell",Blockly.ComputerCraft.SHELL_BLOCK_COLOUR_,{funcName:"run",text:"run program %1 %v",args:[["PATH","String"]],varArgName:"argument",varArgType:"String",varArgTitle:"with arguments",varArgTooltip:"Argument to the program.",varArgCount:1,varContainerName:"arguments",varContainerTooltip:"Add, delete, or reorder arguments to the program.",tooltip:"Run the specified program with the provided arguments.\nIncrease or decrease the number of arguments by clicking the star."});Blockly.ComputerCraft.KEYS_BLOCK_COLOUR_=290;Blockly.ComputerCraft.buildValueBlock("keys",Blockly.ComputerCraft.KEYS_BLOCK_COLOUR_,{funcName:"getName",text:"get key name from code %1",args:[["CODE","Number"]],output:"String",tooltip:"Get the name of a keyboard key from its numeric scan code."});Blockly.Blocks.colour={};Blockly.Blocks.colour.HUE=20;Blockly.Blocks.colour_picker={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",colour:Blockly.Blocks.colour.HUE,helpUrl:Blockly.Msg.COLOUR_PICKER_HELPURL});var a=this;this.setTooltip(function(){var b=a.getParent();return b&&b.tooltip||Blockly.Msg.COLOUR_PICKER_TOOLTIP})}};
Blockly.Blocks.colour_random={init:function(){this.jsonInit({message0:Blockly.Msg.COLOUR_RANDOM_TITLE,output:"Colour",colour:Blockly.Blocks.colour.HUE,tooltip:Blockly.Msg.COLOUR_RANDOM_TOOLTIP,helpUrl:Blockly.Msg.COLOUR_RANDOM_HELPURL})}};
Blockly.Blocks.colour_rgb={init:function(){this.setHelpUrl(Blockly.Msg.COLOUR_RGB_HELPURL);this.setColour(Blockly.Blocks.colour.HUE);this.appendValueInput("RED").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_RGB_TITLE).appendField(Blockly.Msg.COLOUR_RGB_RED);this.appendValueInput("GREEN").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_RGB_GREEN);this.appendValueInput("BLUE").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_RGB_BLUE);
this.setOutput(!0,"Colour");this.setTooltip(Blockly.Msg.COLOUR_RGB_TOOLTIP)}};
Blockly.Blocks.colour_blend={init:function(){this.setHelpUrl(Blockly.Msg.COLOUR_BLEND_HELPURL);this.setColour(Blockly.Blocks.colour.HUE);this.appendValueInput("COLOUR1").setCheck("Colour").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_BLEND_TITLE).appendField(Blockly.Msg.COLOUR_BLEND_COLOUR1);this.appendValueInput("COLOUR2").setCheck("Colour").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_BLEND_COLOUR2);this.appendValueInput("RATIO").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_BLEND_RATIO);
this.setOutput(!0,"Colour");this.setTooltip(Blockly.Msg.COLOUR_BLEND_TOOLTIP)}};Blockly.ComputerCraft.HELP_BLOCK_COLOUR_=290;
Blockly.ComputerCraft.HELP_FUNCS_=[{funcName:"path",text:"get help path",output:"String",tooltip:"Get the list of locations that will be searched for help files,\nas a string containing multiple search paths separated by colons."},{funcName:"setPath",text:"set help path to %1",args:[["PATH","String"]],tooltip:"Set the list of locations to be searched for help files.\nThe input should be a string containing search paths separated by colons."},{funcName:"lookup",text:"get help path for %1",args:[["TOPIC",
"String"]],tooltip:"Get the path to the file containing the help page for the given topic.\nIf it cannot be found, the result will be null."},{funcName:"topics",text:"get list of help topics",tooltip:"Get a list of all available help topics.",output:"List"}];Blockly.ComputerCraft.HELP_FUNCS_.forEach(function(a){Blockly.ComputerCraft.buildValueBlock("help",Blockly.ComputerCraft.HELP_BLOCK_COLOUR_,a)});Blockly.ComputerCraft.PAINTUTILS_BLOCK_COLOUR_=310;
Blockly.ComputerCraft.PAINTUTILS_FUNCS_=[{funcName:"loadImage",text:"load image from path %1",args:[["PATH","String"]],output:"Image",tooltip:"Load an image object from the specified path."},{funcName:"drawImage",text:"draw image %1 at (%2, %3)",args:[["IMAGE","Image"],["X","Number"],["Y","Number"]],tooltip:'Draw an image at the specified (x, y) coordinates.\nAn image can be obtained with the "load image" block.'},{funcName:"drawPixel",text:"draw %3 pixel at (%1, %2)",args:[["X","Number"],["Y","Number"],
["COLOUR","Colour"]],tooltip:"Draw a pixel (dot) at the specified (x, y) coordinates\nin the specified colour."},{funcName:"drawLine",text:"draw %5 line from (%1, %2) to (%3, %4)",args:[["X1","Number"],["Y1","Number"],["X2","Number"],["Y2","Number"],["COLOUR","Colour"]],tooltip:"Draw a line in the specified colour from the first pair\nof (x, y) coordinates to the second pair of (x, y) coordinates."}];
Blockly.ComputerCraft.PAINTUTILS_FUNCS_.forEach(function(a){Blockly.ComputerCraft.buildValueBlock("paintutils",Blockly.ComputerCraft.PAINTUTILS_BLOCK_COLOUR_,a)});Blockly.ComputerCraft.TABLE_BLOCK_COLOUR_=230;Blockly.Blocks.tables_create_empty={init:function(){this.setHelpUrl(Blockly.Msg.LISTS_CREATE_EMPTY_HELPURL);this.setColour(260);this.setOutput(!0,"Array");this.appendDummyInput().appendTitle(Blockly.Msg.LISTS_CREATE_EMPTY_TITLE);this.setTooltip(Blockly.Msg.LISTS_CREATE_EMPTY_TOOLTIP)}};
Blockly.Blocks.lists_create_with={init:function(){this.setColour(260);this.appendValueInput("ADD0").appendTitle(Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH);this.appendValueInput("ADD1");this.appendValueInput("ADD2");this.setOutput(!0,"Array");this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP);this.itemCount_=3},mutationToDom:function(a){a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){for(a=
0;a<this.itemCount_;a++)this.removeInput("ADD"+a)}};Blockly.Blocks.loops={};Blockly.Blocks.loops.HUE=120;Blockly.Blocks.controls_repeat_ext={init:function(){this.jsonInit({message0:Blockly.Msg.CONTROLS_REPEAT_TITLE,args0:[{type:"input_value",name:"TIMES",check:"Number"}],previousStatement:null,nextStatement:null,colour:Blockly.Blocks.loops.HUE,tooltip:Blockly.Msg.CONTROLS_REPEAT_TOOLTIP,helpUrl:Blockly.Msg.CONTROLS_REPEAT_HELPURL});this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_REPEAT_INPUT_DO)}};
Blockly.Blocks.controls_repeat={init:function(){this.jsonInit({message0:Blockly.Msg.CONTROLS_REPEAT_TITLE,args0:[{type:"field_input",name:"TIMES",text:"10"}],previousStatement:null,nextStatement:null,colour:Blockly.Blocks.loops.HUE,tooltip:Blockly.Msg.CONTROLS_REPEAT_TOOLTIP,helpUrl:Blockly.Msg.CONTROLS_REPEAT_HELPURL});this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_REPEAT_INPUT_DO);this.getField("TIMES").setValidator(Blockly.FieldTextInput.nonnegativeIntegerValidator)}};
Blockly.Blocks.controls_whileUntil={init:function(){var a=[[Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE,"WHILE"],[Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL,"UNTIL"]];this.setHelpUrl(Blockly.Msg.CONTROLS_WHILEUNTIL_HELPURL);this.setColour(Blockly.Blocks.loops.HUE);this.appendValueInput("BOOL").setCheck("Boolean").appendField(new Blockly.FieldDropdown(a),"MODE");this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_WHILEUNTIL_INPUT_DO);this.setPreviousStatement(!0);this.setNextStatement(!0);
var b=this;this.setTooltip(function(){var a=b.getFieldValue("MODE");return{WHILE:Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE,UNTIL:Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}[a]})}};
Blockly.Blocks.controls_for={init:function(){this.jsonInit({message0:Blockly.Msg.CONTROLS_FOR_TITLE,args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:Blockly.Blocks.loops.HUE,helpUrl:Blockly.Msg.CONTROLS_FOR_HELPURL});this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_FOR_INPUT_DO);
var a=this;this.setTooltip(function(){return Blockly.Msg.CONTROLS_FOR_TOOLTIP.replace("%1",a.getFieldValue("VAR"))})},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,"VAR")},customContextMenu:function(a){if(!this.isCollapsed()){var b={enabled:!0},c=this.getFieldValue("VAR");b.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",c);c=goog.dom.createDom("field",null,c);c.setAttribute("name","VAR");
c=goog.dom.createDom("block",null,c);c.setAttribute("type","variables_get");b.callback=Blockly.ContextMenu.callbackFactory(this,c);a.push(b)}}};
Blockly.Blocks.controls_forEach={init:function(){this.jsonInit({message0:Blockly.Msg.CONTROLS_FOREACH_TITLE,args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],previousStatement:null,nextStatement:null,colour:Blockly.Blocks.loops.HUE,helpUrl:Blockly.Msg.CONTROLS_FOREACH_HELPURL});this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_FOREACH_INPUT_DO);var a=this;this.setTooltip(function(){return Blockly.Msg.CONTROLS_FOREACH_TOOLTIP.replace("%1",
a.getFieldValue("VAR"))})},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,"VAR")},customContextMenu:Blockly.Blocks.controls_for.customContextMenu};
Blockly.Blocks.controls_flow_statements={init:function(){var a=[[Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK,"BREAK"],[Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE,"CONTINUE"]];this.setHelpUrl(Blockly.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL);this.setColour(Blockly.Blocks.loops.HUE);this.appendDummyInput().appendField(new Blockly.FieldDropdown(a),"FLOW");this.setPreviousStatement(!0);var b=this;this.setTooltip(function(){var a=b.getFieldValue("FLOW");return{BREAK:Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK,
CONTINUE:Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}[a]})},onchange:function(){var a=!1,b=this;do{if(-1!=this.LOOP_TYPES.indexOf(b.type)){a=!0;break}b=b.getSurroundParent()}while(b);a?this.setWarningText(null):this.setWarningText(Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING)},LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]};Blockly.ComputerCraft.Turtle={};Blockly.ComputerCraft.TURTLE_BLOCK_COLOUR_=120;Blockly.ComputerCraft.Turtle.QUANTITY_ALL_="QUANTITY_ALL";
Blockly.ComputerCraft.TURTLE_DIR_FUNCS_=[{blockName:"turn",directions:[["turn right","turnRight"],["turn left","turnLeft"]],tooltip:"Turn 90 degrees in the specified direction."},{blockName:"move",directions:[["move forward","forward"],["move backward","back"],["move up","up"],["move down","down"]],tooltip:"Try to move the turtle in the specified direction,\nreturning true if successful, false if the way is blocked."},{blockName:"dig",directions:[["dig in front","dig"],["dig up","digUp"],["dig down",
"digDown"]],tooltip:"Try to dig in the specified direction, returning true if successful,\nfalse otherwise (e.g., if the block is empty or bedrock encountered)."},{blockName:"attack",directions:[["attack in front","attack"],["attack up","attackUp"],["attack down","attackDown"]],tooltip:"Attack in the specified direction, returning\ntrue if something was hit, false otherwise."},{blockName:"detect",directions:[["detect in front","detect"],["detect up","detectUp"],["detect down","detectDown"]],tooltip:"Detect whether there is a block in the specified direction.\nMobs, liquids, and floating objects are not detected.\nThe result is true if a block was detected, false otherwise."},
{blockName:"suck",directions:[["suck in front","suck"],["suck up","suckUp"],["suck down","suckDown"]],tooltip:"Picks up an item stack of any size from the ground\nor an inventory (such as a chest) on that side\nand places in the selected slot.\nReturns true if the turtle can pick up an item."},{funcName:"select",text:"select slot #%1",args:[["VALUE","Number"]],tooltip:"Select the slot to use (1-16) for subsequent\ncraft, drop, etc., commands.  Returns true if\nthe input was in range, false otherwise."},
{blockName:"drop",text:"drop %1 %2",directions:[["in front","drop"],["up","dropUp"],["down","dropDown"]],args:[[Blockly.ComputerCraft.Turtle.QUANTITY_ALL_,"Number"]],tooltip:"Drops the supplied amount of items in the selected slot.\nIf an inventory such as a chest is on that side of the turtle,\nit will try to place into the inventory,\nreturning false if the inventory is full."},{funcName:"craft",text:"craft %1",args:[[Blockly.ComputerCraft.Turtle.QUANTITY_ALL_,"Number"]],tooltip:"Craft items using ingredients in the turtle's inventory when they're\nin a valid recipe pattern,placing the result in the currently selected slot.\nReturns true if items are crafted.\nIf no limit is provided, the turtle will make as many as possible (maximum 64).\nIf a limit of 0 is supplied, no items will be consumed,\nbut the return value will indicate whether a valid recipe is present."},
{funcName:"refuel",text:"refuel %1",args:[[Blockly.ComputerCraft.Turtle.QUANTITY_ALL_,"Number"]],tooltip:"Refuels the turtle using a fuel item in the selected slot,\nreturning whether it was successful.\nIf an input of 0 is supplied, no items will be consumed,\nbut the return value will indicate if the item can be used as fuel."},{funcName:"transferTo",text:"transfer %2 items from selected slot to slot %1",args:[["SLOT","Number"],[Blockly.ComputerCraft.Turtle.QUANTITY_ALL_,"Number"]],tooltip:"Transfers items from the currently selected slot\nto the specified, returning whether it was successful."}];
Blockly.ComputerCraft.TURTLE_DIR_FUNCS_.forEach(function(a){a.directions?(a.text||(a.text="%1"),a.args||(a.args=[]),a.args.unshift(["DIRECTIONS",new Blockly.FieldDropdown(a.directions)]),a.ddFuncName="DIRECTIONS",a.helpUrlType=Blockly.ComputerCraft.HelpUrlType.PREFIX_DD):a.helpUrlType=Blockly.ComputerCraft.HelpUrlType.PREFIX_NAME;a.output="Boolean";a.multipleOutputs=2;a.expStmt=!0;var b=Blockly.ComputerCraft.buildValueBlock("turtle",Blockly.ComputerCraft.TURTLE_BLOCK_COLOUR_,a);a.args.some(function(a){return a[0]==
Blockly.ComputerCraft.Turtle.QUANTITY_ALL_})&&(Blockly.Lua[b.blockName]=function(a){var b=a.info.args.map(function(a){return a[0]}).filter(function(b){return b!=Blockly.ComputerCraft.Turtle.QUANTITY_ALL_||!a.getInputTargetBlock(b)||!a.getInputTargetBlock(b).isAll});return Blockly.ComputerCraft.generateLua(a,b)})});
Blockly.Blocks.turtle_all={isAll:!0,init:function(){this.setColour(230);this.appendDummyInput().appendTitle("all");this.setOutput(!0,"Number");this.setTooltip("Indicates that certain operations should be done to all items.")},onchange:function(){if(this.workspace&&this.outputConnection&&this.outputConnection.targetConnection)for(var a=this.outputConnection.targetConnection.sourceBlock_,b=0;b<a.inputList.length;b++){var c=a.inputList[b];c.connection&&c.connection.targetConnection&&c.connection.targetConnection.sourceBlock_==
this&&(c.name==Blockly.ComputerCraft.Turtle.QUANTITY_ALL_?this.setWarningText(null):this.setWarningText('This slot cannot accept "all" as an input.'))}}};Blockly.Lua.turtle_all=function(a){return["",Blockly.Lua.ORDER_NONE]};
Blockly.ComputerCraft.buildDependentInputBlock("turtle",Blockly.ComputerCraft.TURTLE_BLOCK_COLOUR_,{blockName:"place",text:"place %1 %2 %3",args:[["TYPE*",[["item","item"],["sign","sign*"]]],["DIRECTION",[["in front","place"],["up","placeUp"],["below","placeDown"]]],["TEXT^","String"]],ddFuncName:"DIRECTION",depTitle:"with text",output:"Boolean",multipleOutputs:!0,expStmt:!0,tooltip:function(a){return"item"==a.getTitleValue("TYPE")?"Place a block or item from the selected slot.\nThe result is true if successful, false otherwise.":
"Place a block or item from the selected slot.\nIf it is a sign, it will have the specified text.\nThe result is true if an item could be placed, false otherwise."}});
Blockly.ComputerCraft.TURTLE_VALUE_FUNCS_=[{blockName:"compare",text:"%1",args:[["DIRECTIONS",new Blockly.FieldDropdown([["compare front item to selected slot","compare"],["compare above item to selected slot","compareUp"],["compare below item to selected slot","compareDown"]])]],ddFuncName:"DIRECTIONS",output:"Boolean",tooltip:"Check if the block in the world is the same as the blocks\nin the selected slot of the turtle's inventory."},{blockName:"get_slot_info",text:"get %1 in slot %2",args:[["CHOICE",
new Blockly.FieldDropdown([["item count","getItemCount"],["free space","getItemSpace"]])],["SLOT","Number"]],ddFuncName:"CHOICE",output:"Number",tooltip:function(a){return"getItemCount"==a.getTitleValue("CHOICE")?"Get the count of items in the numbered slot.":"Get the number of additional items that can be placed in the numbered slot."}},{funcName:"compareTo",text:"compare item in selected slot to slot %1",args:[["VALUE","Number"]],output:"Boolean",tooltip:"Compares the currently selected slot and the specified slot,\nreturning true if they're the same, false otherwise."},
{funcName:"getFuelLevel",text:"get fuel level",output:["Number","String"],tooltip:'Returns the current fuel level of the turtle,\nwhich is the number of blocks the turtle can move.\nIf fuel is turned off in the ComputerCraft configuration file,\nthis will return "unlimited".'}];Blockly.ComputerCraft.TURTLE_VALUE_FUNCS_.forEach(function(a){Blockly.ComputerCraft.buildValueBlock("turtle",Blockly.ComputerCraft.TURTLE_BLOCK_COLOUR_,a)});Blockly.Blocks.math={};Blockly.Blocks.math.HUE=230;Blockly.Blocks.math_number={init:function(){this.setHelpUrl(Blockly.Msg.MATH_NUMBER_HELPURL);this.setColour(Blockly.Blocks.math.HUE);this.appendDummyInput().appendField(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),"NUM");this.setOutput(!0,"Number");var a=this;this.setTooltip(function(){var b=a.getParent();return b&&b.tooltip||Blockly.Msg.MATH_NUMBER_TOOLTIP})}};
Blockly.Blocks.math_arithmetic={init:function(){var a=[[Blockly.Msg.MATH_ADDITION_SYMBOL,"ADD"],[Blockly.Msg.MATH_SUBTRACTION_SYMBOL,"MINUS"],[Blockly.Msg.MATH_MULTIPLICATION_SYMBOL,"MULTIPLY"],[Blockly.Msg.MATH_DIVISION_SYMBOL,"DIVIDE"],[Blockly.Msg.MATH_POWER_SYMBOL,"POWER"]];this.setHelpUrl(Blockly.Msg.MATH_ARITHMETIC_HELPURL);this.setColour(Blockly.Blocks.math.HUE);this.setOutput(!0,"Number");this.appendValueInput("A").setCheck("Number");this.appendValueInput("B").setCheck("Number").appendField(new Blockly.FieldDropdown(a),
"OP");this.setInputsInline(!0);var b=this;this.setTooltip(function(){var a=b.getFieldValue("OP");return{ADD:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD,MINUS:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS,MULTIPLY:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY,DIVIDE:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE,POWER:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_POWER}[a]})}};
Blockly.Blocks.math_single={init:function(){var a=[[Blockly.Msg.MATH_SINGLE_OP_ROOT,"ROOT"],[Blockly.Msg.MATH_SINGLE_OP_ABSOLUTE,"ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]];this.setHelpUrl(Blockly.Msg.MATH_SINGLE_HELPURL);this.setColour(Blockly.Blocks.math.HUE);this.setOutput(!0,"Number");this.appendValueInput("NUM").setCheck("Number").appendField(new Blockly.FieldDropdown(a),"OP");var b=this;this.setTooltip(function(){var a=b.getFieldValue("OP");return{ROOT:Blockly.Msg.MATH_SINGLE_TOOLTIP_ROOT,
ABS:Blockly.Msg.MATH_SINGLE_TOOLTIP_ABS,NEG:Blockly.Msg.MATH_SINGLE_TOOLTIP_NEG,LN:Blockly.Msg.MATH_SINGLE_TOOLTIP_LN,LOG10:Blockly.Msg.MATH_SINGLE_TOOLTIP_LOG10,EXP:Blockly.Msg.MATH_SINGLE_TOOLTIP_EXP,POW10:Blockly.Msg.MATH_SINGLE_TOOLTIP_POW10}[a]})}};
Blockly.Blocks.math_trig={init:function(){var a=[[Blockly.Msg.MATH_TRIG_SIN,"SIN"],[Blockly.Msg.MATH_TRIG_COS,"COS"],[Blockly.Msg.MATH_TRIG_TAN,"TAN"],[Blockly.Msg.MATH_TRIG_ASIN,"ASIN"],[Blockly.Msg.MATH_TRIG_ACOS,"ACOS"],[Blockly.Msg.MATH_TRIG_ATAN,"ATAN"]];this.setHelpUrl(Blockly.Msg.MATH_TRIG_HELPURL);this.setColour(Blockly.Blocks.math.HUE);this.setOutput(!0,"Number");this.appendValueInput("NUM").setCheck("Number").appendField(new Blockly.FieldDropdown(a),"OP");var b=this;this.setTooltip(function(){var a=
b.getFieldValue("OP");return{SIN:Blockly.Msg.MATH_TRIG_TOOLTIP_SIN,COS:Blockly.Msg.MATH_TRIG_TOOLTIP_COS,TAN:Blockly.Msg.MATH_TRIG_TOOLTIP_TAN,ASIN:Blockly.Msg.MATH_TRIG_TOOLTIP_ASIN,ACOS:Blockly.Msg.MATH_TRIG_TOOLTIP_ACOS,ATAN:Blockly.Msg.MATH_TRIG_TOOLTIP_ATAN}[a]})}};
Blockly.Blocks.math_constant={init:function(){this.setHelpUrl(Blockly.Msg.MATH_CONSTANT_HELPURL);this.setColour(Blockly.Blocks.math.HUE);this.setOutput(!0,"Number");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\u00bd)","SQRT1_2"],["\u221e","INFINITY"]]),"CONSTANT");this.setTooltip(Blockly.Msg.MATH_CONSTANT_TOOLTIP)}};
Blockly.Blocks.math_number_property={init:function(){var a=[[Blockly.Msg.MATH_IS_EVEN,"EVEN"],[Blockly.Msg.MATH_IS_ODD,"ODD"],[Blockly.Msg.MATH_IS_PRIME,"PRIME"],[Blockly.Msg.MATH_IS_WHOLE,"WHOLE"],[Blockly.Msg.MATH_IS_POSITIVE,"POSITIVE"],[Blockly.Msg.MATH_IS_NEGATIVE,"NEGATIVE"],[Blockly.Msg.MATH_IS_DIVISIBLE_BY,"DIVISIBLE_BY"]];this.setColour(Blockly.Blocks.math.HUE);this.appendValueInput("NUMBER_TO_CHECK").setCheck("Number");a=new Blockly.FieldDropdown(a,function(a){this.sourceBlock_.updateShape_("DIVISIBLE_BY"==
a)});this.appendDummyInput().appendField(a,"PROPERTY");this.setInputsInline(!0);this.setOutput(!0,"Boolean");this.setTooltip(Blockly.Msg.MATH_IS_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation"),b="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");a.setAttribute("divisor_input",b);return a},domToMutation:function(a){a="true"==a.getAttribute("divisor_input");this.updateShape_(a)},updateShape_:function(a){var b=this.getInput("DIVISOR");a?b||this.appendValueInput("DIVISOR").setCheck("Number"):
b&&this.removeInput("DIVISOR")}};
Blockly.Blocks.math_change={init:function(){this.jsonInit({message0:Blockly.Msg.MATH_CHANGE_TITLE,args0:[{type:"field_variable",name:"VAR",variable:Blockly.Msg.MATH_CHANGE_TITLE_ITEM},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,colour:Blockly.Blocks.math.HUE,helpUrl:Blockly.Msg.MATH_CHANGE_HELPURL});var a=this;this.setTooltip(function(){return Blockly.Msg.MATH_CHANGE_TOOLTIP.replace("%1",a.getFieldValue("VAR"))})},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,
b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,"VAR")}};
Blockly.Blocks.math_round={init:function(){var a=[[Blockly.Msg.MATH_ROUND_OPERATOR_ROUND,"ROUND"],[Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDUP,"ROUNDUP"],[Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN,"ROUNDDOWN"]];this.setHelpUrl(Blockly.Msg.MATH_ROUND_HELPURL);this.setColour(Blockly.Blocks.math.HUE);this.setOutput(!0,"Number");this.appendValueInput("NUM").setCheck("Number").appendField(new Blockly.FieldDropdown(a),"OP");this.setTooltip(Blockly.Msg.MATH_ROUND_TOOLTIP)}};
Blockly.Blocks.math_on_list={init:function(){var a=[[Blockly.Msg.MATH_ONLIST_OPERATOR_SUM,"SUM"],[Blockly.Msg.MATH_ONLIST_OPERATOR_MIN,"MIN"],[Blockly.Msg.MATH_ONLIST_OPERATOR_MAX,"MAX"],[Blockly.Msg.MATH_ONLIST_OPERATOR_AVERAGE,"AVERAGE"],[Blockly.Msg.MATH_ONLIST_OPERATOR_MEDIAN,"MEDIAN"],[Blockly.Msg.MATH_ONLIST_OPERATOR_MODE,"MODE"],[Blockly.Msg.MATH_ONLIST_OPERATOR_STD_DEV,"STD_DEV"],[Blockly.Msg.MATH_ONLIST_OPERATOR_RANDOM,"RANDOM"]],b=this;this.setHelpUrl(Blockly.Msg.MATH_ONLIST_HELPURL);this.setColour(Blockly.Blocks.math.HUE);
this.setOutput(!0,"Number");a=new Blockly.FieldDropdown(a,function(a){b.updateType_(a)});this.appendValueInput("LIST").setCheck("Array").appendField(a,"OP");this.setTooltip(function(){var a=b.getFieldValue("OP");return{SUM:Blockly.Msg.MATH_ONLIST_TOOLTIP_SUM,MIN:Blockly.Msg.MATH_ONLIST_TOOLTIP_MIN,MAX:Blockly.Msg.MATH_ONLIST_TOOLTIP_MAX,AVERAGE:Blockly.Msg.MATH_ONLIST_TOOLTIP_AVERAGE,MEDIAN:Blockly.Msg.MATH_ONLIST_TOOLTIP_MEDIAN,MODE:Blockly.Msg.MATH_ONLIST_TOOLTIP_MODE,STD_DEV:Blockly.Msg.MATH_ONLIST_TOOLTIP_STD_DEV,
RANDOM:Blockly.Msg.MATH_ONLIST_TOOLTIP_RANDOM}[a]})},updateType_:function(a){"MODE"==a?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("op",this.getFieldValue("OP"));return a},domToMutation:function(a){this.updateType_(a.getAttribute("op"))}};
Blockly.Blocks.math_modulo={init:function(){this.jsonInit({message0:Blockly.Msg.MATH_MODULO_TITLE,args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",colour:Blockly.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_MODULO_TOOLTIP,helpUrl:Blockly.Msg.MATH_MODULO_HELPURL})}};
Blockly.Blocks.math_constrain={init:function(){this.jsonInit({message0:Blockly.Msg.MATH_CONSTRAIN_TITLE,args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",colour:Blockly.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_CONSTRAIN_TOOLTIP,helpUrl:Blockly.Msg.MATH_CONSTRAIN_HELPURL})}};
Blockly.Blocks.math_random_int={init:function(){this.jsonInit({message0:Blockly.Msg.MATH_RANDOM_INT_TITLE,args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",colour:Blockly.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_RANDOM_INT_TOOLTIP,helpUrl:Blockly.Msg.MATH_RANDOM_INT_HELPURL})}};
Blockly.Blocks.math_random_float={init:function(){this.setHelpUrl(Blockly.Msg.MATH_RANDOM_FLOAT_HELPURL);this.setColour(Blockly.Blocks.math.HUE);this.setOutput(!0,"Number");this.appendDummyInput().appendField(Blockly.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM);this.setTooltip(Blockly.Msg.MATH_RANDOM_FLOAT_TOOLTIP)}};Blockly.ComputerCraft.BIT_BLOCK_COLOUR_=290;
Blockly.ComputerCraft.BIT_FUNCS_=[{blockName:"shift",text:"shift %1 %2 %3 bits",args:[["N","Number"],["OPTION",new Blockly.FieldDropdown([["left","blshift"],["right arithmetically","brshift"],["right logically","blogic_rshift"]])],["BITS","Number"]],output:"Number",ddFuncName:"OPTION",tooltip:"Shift the number by the specified number of bits.\nThis inputs are treated as 32-bit unsigned integers.\nAn error is raises if either input is greater than 2^32 - 1.",helpUrlType:Blockly.ComputerCraft.HelpUrlType.PREFIX_DD},
{blockName:"bitwise",text:"%1 %2 %3",args:[["X","Number"],["FUNCTION",new Blockly.FieldDropdown([["XOR","bxor"],["OR","bor"],["AND","band"]])],["Y","Number"]],output:"Number",ddFuncName:"FUNCTION",tooltip:function(a){a={bxor:{name:"exclusive OR",description:"exactly one"},bor:{name:"inclusive OR",description:"at least one"},band:{name:"AND",description:"both"}}[a.getTitleValue("FUNCTION")];return"Compute the bitwise "+a.name.toUpperCase()+" of the two numeric inputs.\nFor each of the 32 bit positions, the value is 1 if and only if\n"+
a.description.toUpperCase()+" of the corresponding bits in the inputs are 1."}},{funcName:"bnot",text:"bitwise not %1",args:[["X","Number"]],output:"Number",tooltip:"Compute the bitwise inverse of a number, taken in\nthe domain and range of 32-bit unsigned integers."}];Blockly.ComputerCraft.BIT_FUNCS_.forEach(function(a){Blockly.ComputerCraft.buildValueBlock("bit",Blockly.ComputerCraft.BIT_BLOCK_COLOUR_,a)});Blockly.ComputerCraft.FS_BLOCK_COLOUR_=410;
Blockly.ComputerCraft.FS_FUNCS_=[{funcName:"list",output:"Table",text:"list files in %1",args:[["DIR","String"]],tooltip:"Returns a list of all the files\n(including subdirectories but not their contents)\ncontained in a directory, as a numerically indexed table."},{funcName:"exists",output:"Boolean",text:"path %1 exists?",args:[["PATH","String"]],tooltip:"Checks if its input refers to an existing file or directory,\nreturning true if it does, false otherwise"},{funcName:"isReadOnly",output:"Boolean",
text:"is path %1 read-only?",args:[["PATH","String"]],tooltip:"Checks if a file or directory is read-only (cannot be modified),\nreturning true if it is, false otherwise"},{funcName:"getName",output:"String",text:"get file name from path %1",args:[["PATH","String"]],tooltip:"Gets the final part (file name) from a path"},{funcName:"getDrive",output:"String",text:"get drive type for path %1",args:[["PATH","String"]],tooltip:"Returns the type of the storage medium holding a path,\nor nil if the path does not exist. This is one of\n\u201chdd\u201d if the path is stored on the computer\u2019s local hard drive,\n\u201crom\u201d if the path is in ROM, or the side on which a disk drive\nis attached if the path is on a floppy disk."},
{funcName:"getSize",output:"Number",text:"get size of file %1",args:[["PATH","String"]],tooltip:"Gets the amount of space taken up by the file, in bytes.\n"},{funcName:"getFreeSpace",output:"Number",text:"get amount of free space in %1",args:[["DIR","String"]],tooltip:"Gets the amount of free space in the given directory, in bytes."},{funcName:"makeDir",stmtConns:Blockly.ComputerCraft.StmtConns.BOTH,text:"create directory %1",args:[["DIR","String"]],tooltip:"Creates a directory with the given path,\ncreating any missing parent components.\nIf the location is already a directory, nothing changes.\nIf the location is already a file, an error occurs."},
{funcName:"move",stmtConns:Blockly.ComputerCraft.StmtConns.BOTH,text:"move file/directory from %1 to %2",args:[["PATH1","String"],["PATH2","String"]],tooltip:"Moves a file or directory to a new location.\nThe parent of the new location must be an existing writeable directory.\nThe second input must include a file name and that file must not yet exist."},{funcName:"copy",stmtConns:Blockly.ComputerCraft.StmtConns.BOTH,text:"copy file/directory from %1 to %2",args:[["PATH1","String"],["PATH2","String"]],
tooltip:"Copies a file or directory to a new location.\nThe parent of the new location must be an existing writeable directory.\nThe second input must include a file name and that file must not yet exist."},{funcName:"delete",stmtConns:Blockly.ComputerCraft.StmtConns.BOTH,text:"delete file/directory %1",args:[["PATH","String"]],tooltip:"Deletes a file or directory and its contents.\nNothing happens if the file/directory does not exist."},{funcName:"combine",output:"String",text:"combine file paths %1 and %2",
args:[["PATH1","String"],["PATH2","String"]],tooltip:"Combines two path components, returning a path\nconsisting of the second path nexted in the first path.\nNeither path needs to exist; this function only manipulates strings."}];Blockly.ComputerCraft.FS_FUNCS_.forEach(function(a){Blockly.ComputerCraft.buildValueBlock("fs",Blockly.ComputerCraft.FS_BLOCK_COLOUR_,a)});Blockly.Blocks.lists={};Blockly.Blocks.lists.HUE=260;Blockly.Blocks.lists_create_empty={init:function(){this.jsonInit({message0:Blockly.Msg.LISTS_CREATE_EMPTY_TITLE,output:"Array",colour:Blockly.Blocks.lists.HUE,tooltip:Blockly.Msg.LISTS_CREATE_EMPTY_TOOLTIP,helpUrl:Blockly.Msg.LISTS_CREATE_EMPTY_HELPURL})}};
Blockly.Blocks.lists_create_with={init:function(){this.setHelpUrl(Blockly.Msg.LISTS_CREATE_WITH_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);this.itemCount_=3;this.updateShape_();this.setOutput(!0,"Array");this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),
10);this.updateShape_()},decompose:function(a){var b=a.newBlock("lists_create_with_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.itemCount_;d++){var e=a.newBlock("lists_create_with_item");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");for(a=[];b;)a.push(b.valueConnection_),b=b.nextConnection&&b.nextConnection.targetBlock();this.itemCount_=a.length;this.updateShape_();for(b=0;b<this.itemCount_;b++)a[b]&&
this.getInput("ADD"+b).connection.connect(a[b])},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;){var c=this.getInput("ADD"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){if(this.getInput("EMPTY"))this.removeInput("EMPTY");else for(var a=0;this.getInput("ADD"+a);)this.removeInput("ADD"+a),a++;if(0==this.itemCount_)this.appendDummyInput("EMPTY").appendField(Blockly.Msg.LISTS_CREATE_EMPTY_TITLE);
else for(a=0;a<this.itemCount_;a++){var b=this.appendValueInput("ADD"+a);0==a&&b.appendField(Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH)}}};Blockly.Blocks.lists_create_with_container={init:function(){this.setColour(Blockly.Blocks.lists.HUE);this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD);this.appendStatementInput("STACK");this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.lists_create_with_item={init:function(){this.setColour(Blockly.Blocks.lists.HUE);this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.lists_repeat={init:function(){this.jsonInit({message0:Blockly.Msg.LISTS_REPEAT_TITLE,args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",colour:Blockly.Blocks.lists.HUE,tooltip:Blockly.Msg.LISTS_REPEAT_TOOLTIP,helpUrl:Blockly.Msg.LISTS_REPEAT_HELPURL})}};
Blockly.Blocks.lists_length={init:function(){this.jsonInit({message0:Blockly.Msg.LISTS_LENGTH_TITLE,args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",colour:Blockly.Blocks.lists.HUE,tooltip:Blockly.Msg.LISTS_LENGTH_TOOLTIP,helpUrl:Blockly.Msg.LISTS_LENGTH_HELPURL})}};
Blockly.Blocks.lists_isEmpty={init:function(){this.jsonInit({message0:Blockly.Msg.LISTS_ISEMPTY_TITLE,args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",colour:Blockly.Blocks.lists.HUE,tooltip:Blockly.Msg.LISTS_ISEMPTY_TOOLTIP,helpUrl:Blockly.Msg.LISTS_ISEMPTY_HELPURL})}};
Blockly.Blocks.lists_indexOf={init:function(){var a=[[Blockly.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[Blockly.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.LISTS_INDEX_OF_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);this.setOutput(!0,"Number");this.appendValueInput("VALUE").setCheck("Array").appendField(Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST);this.appendValueInput("FIND").appendField(new Blockly.FieldDropdown(a),"END");this.setInputsInline(!0);this.setTooltip(Blockly.Msg.LISTS_INDEX_OF_TOOLTIP)}};
Blockly.Blocks.lists_getIndex={init:function(){var a=[[Blockly.Msg.LISTS_GET_INDEX_GET,"GET"],[Blockly.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[Blockly.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[Blockly.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[Blockly.Msg.LISTS_GET_INDEX_LAST,"LAST"],[Blockly.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]];this.setHelpUrl(Blockly.Msg.LISTS_GET_INDEX_HELPURL);
this.setColour(Blockly.Blocks.lists.HUE);a=new Blockly.FieldDropdown(a,function(a){this.sourceBlock_.updateStatement_("REMOVE"==a)});this.appendValueInput("VALUE").setCheck("Array").appendField(Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST);this.appendDummyInput().appendField(a,"MODE").appendField("","SPACE");this.appendDummyInput("AT");Blockly.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.LISTS_GET_INDEX_TAIL);this.setInputsInline(!0);this.setOutput(!0);this.updateAt_(!0);
var b=this;this.setTooltip(function(){var a=b.getFieldValue("MODE")+"_"+b.getFieldValue("WHERE");return Blockly.Msg["LISTS_GET_INDEX_TOOLTIP_"+a]})},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("statement",!this.outputConnection);var b=this.getInput("AT").type==Blockly.INPUT_VALUE;a.setAttribute("at",b);return a},domToMutation:function(a){var b="true"==a.getAttribute("statement");this.updateStatement_(b);a="false"!=a.getAttribute("at");this.updateAt_(a)},updateStatement_:function(a){a!=
!this.outputConnection&&(this.unplug(!0,!0),a?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(a){this.removeInput("AT");this.removeInput("ORDINAL",!0);a?(this.appendValueInput("AT").setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var b=new Blockly.FieldDropdown(this.WHERE_OPTIONS,
function(b){var d="FROM_START"==b||"FROM_END"==b;if(d!=a){var e=this.sourceBlock_;e.updateAt_(d);e.setFieldValue(b,"WHERE");return null}});this.getInput("AT").appendField(b,"WHERE");Blockly.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};
Blockly.Blocks.lists_setIndex={init:function(){var a=[[Blockly.Msg.LISTS_SET_INDEX_SET,"SET"],[Blockly.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[Blockly.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[Blockly.Msg.LISTS_GET_INDEX_LAST,"LAST"],[Blockly.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]];this.setHelpUrl(Blockly.Msg.LISTS_SET_INDEX_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);this.appendValueInput("LIST").setCheck("Array").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST);
this.appendDummyInput().appendField(new Blockly.FieldDropdown(a),"MODE").appendField("","SPACE");this.appendDummyInput("AT");this.appendValueInput("TO").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_TO);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LISTS_SET_INDEX_TOOLTIP);this.updateAt_(!0);var b=this;this.setTooltip(function(){var a=b.getFieldValue("MODE")+"_"+b.getFieldValue("WHERE");return Blockly.Msg["LISTS_SET_INDEX_TOOLTIP_"+a]})},
mutationToDom:function(){var a=document.createElement("mutation"),b=this.getInput("AT").type==Blockly.INPUT_VALUE;a.setAttribute("at",b);return a},domToMutation:function(a){a="false"!=a.getAttribute("at");this.updateAt_(a)},updateAt_:function(a){this.removeInput("AT");this.removeInput("ORDINAL",!0);a?(this.appendValueInput("AT").setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var b=new Blockly.FieldDropdown(this.WHERE_OPTIONS,
function(b){var d="FROM_START"==b||"FROM_END"==b;if(d!=a){var e=this.sourceBlock_;e.updateAt_(d);e.setFieldValue(b,"WHERE");return null}});this.moveInputBefore("AT","TO");this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO");this.getInput("AT").appendField(b,"WHERE")}};
Blockly.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]];this.WHERE_OPTIONS_2=[[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.LISTS_GET_SUBLIST_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);
this.appendValueInput("LIST").setCheck("Array").appendField(Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);this.appendDummyInput("AT1");this.appendDummyInput("AT2");Blockly.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.LISTS_GET_SUBLIST_TAIL);this.setInputsInline(!0);this.setOutput(!0,"Array");this.updateAt_(1,!0);this.updateAt_(2,!0);this.setTooltip(Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getInput("AT1").type==
Blockly.INPUT_VALUE;a.setAttribute("at1",b);b=this.getInput("AT2").type==Blockly.INPUT_VALUE;a.setAttribute("at2",b);return a},domToMutation:function(a){var b="true"==a.getAttribute("at1");a="true"==a.getAttribute("at2");this.updateAt_(1,b);this.updateAt_(2,a)},updateAt_:function(a,b){this.removeInput("AT"+a);this.removeInput("ORDINAL"+a,!0);b?(this.appendValueInput("AT"+a).setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+a).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):
this.appendDummyInput("AT"+a);var c=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+a],function(c){var e="FROM_START"==c||"FROM_END"==c;if(e!=b){var f=this.sourceBlock_;f.updateAt_(a,e);f.setFieldValue(c,"WHERE"+a);return null}});this.getInput("AT"+a).appendField(c,"WHERE"+a);1==a&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"));Blockly.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};
Blockly.Blocks.lists_split={init:function(){var a=this,b=new Blockly.FieldDropdown([[Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(b){a.updateType_(b)});this.setHelpUrl(Blockly.Msg.LISTS_SPLIT_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);this.appendValueInput("INPUT").setCheck("String").appendField(b,"MODE");this.appendValueInput("DELIM").setCheck("String").appendField(Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER);this.setInputsInline(!0);
this.setOutput(!0,"Array");this.setTooltip(function(){var b=a.getFieldValue("MODE");if("SPLIT"==b)return Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==b)return Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw"Unknown mode: "+b;})},updateType_:function(a){"SPLIT"==a?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("mode",
this.getFieldValue("MODE"));return a},domToMutation:function(a){this.updateType_(a.getAttribute("mode"))}};Blockly.Blocks.logic={};Blockly.Blocks.logic.HUE=210;
Blockly.Blocks.controls_if={init:function(){this.setHelpUrl(Blockly.Msg.CONTROLS_IF_HELPURL);this.setColour(Blockly.Blocks.logic.HUE);this.appendValueInput("IF0").setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_IF);this.appendStatementInput("DO0").appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setMutator(new Blockly.Mutator(["controls_if_elseif","controls_if_else"]));var a=this;this.setTooltip(function(){if(a.elseifCount_||a.elseCount_){if(!a.elseifCount_&&
a.elseCount_)return Blockly.Msg.CONTROLS_IF_TOOLTIP_2;if(a.elseifCount_&&!a.elseCount_)return Blockly.Msg.CONTROLS_IF_TOOLTIP_3;if(a.elseifCount_&&a.elseCount_)return Blockly.Msg.CONTROLS_IF_TOOLTIP_4}else return Blockly.Msg.CONTROLS_IF_TOOLTIP_1;return""});this.elseCount_=this.elseifCount_=0},mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var a=document.createElement("mutation");this.elseifCount_&&a.setAttribute("elseif",this.elseifCount_);this.elseCount_&&a.setAttribute("else",
1);return a},domToMutation:function(a){this.elseifCount_=parseInt(a.getAttribute("elseif"),10)||0;this.elseCount_=parseInt(a.getAttribute("else"),10)||0;for(a=1;a<=this.elseifCount_;a++)this.appendValueInput("IF"+a).setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+a).appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSE)},decompose:function(a){var b=a.newBlock("controls_if_if");
b.initSvg();for(var c=b.nextConnection,d=1;d<=this.elseifCount_;d++){var e=a.newBlock("controls_if_elseif");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}this.elseCount_&&(a=a.newBlock("controls_if_else"),a.initSvg(),c.connect(a.previousConnection));return b},compose:function(a){this.elseCount_&&this.removeInput("ELSE");this.elseCount_=0;for(var b=this.elseifCount_;0<b;b--)this.removeInput("IF"+b),this.removeInput("DO"+b);this.elseifCount_=0;for(a=a.nextConnection.targetBlock();a;){switch(a.type){case "controls_if_elseif":this.elseifCount_++;
var b=this.appendValueInput("IF"+this.elseifCount_).setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSEIF),c=this.appendStatementInput("DO"+this.elseifCount_);c.appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN);a.valueConnection_&&b.connection.connect(a.valueConnection_);a.statementConnection_&&c.connection.connect(a.statementConnection_);break;case "controls_if_else":this.elseCount_++;b=this.appendStatementInput("ELSE");b.appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSE);a.statementConnection_&&
b.connection.connect(a.statementConnection_);break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}},saveConnections:function(a){a=a.nextConnection.targetBlock();for(var b=1;a;){switch(a.type){case "controls_if_elseif":var c=this.getInput("IF"+b),d=this.getInput("DO"+b);a.valueConnection_=c&&c.connection.targetConnection;a.statementConnection_=d&&d.connection.targetConnection;b++;break;case "controls_if_else":d=this.getInput("ELSE");a.statementConnection_=d&&
d.connection.targetConnection;break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}}};Blockly.Blocks.controls_if_if={init:function(){this.setColour(Blockly.Blocks.logic.HUE);this.appendDummyInput().appendField(Blockly.Msg.CONTROLS_IF_IF_TITLE_IF);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.CONTROLS_IF_IF_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.controls_if_elseif={init:function(){this.setColour(Blockly.Blocks.logic.HUE);this.appendDummyInput().appendField(Blockly.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.CONTROLS_IF_ELSEIF_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.controls_if_else={init:function(){this.setColour(Blockly.Blocks.logic.HUE);this.appendDummyInput().appendField(Blockly.Msg.CONTROLS_IF_ELSE_TITLE_ELSE);this.setPreviousStatement(!0);this.setTooltip(Blockly.Msg.CONTROLS_IF_ELSE_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.logic_compare={init:function(){var a=this.RTL?[["=","EQ"],["\u2260","NEQ"],[">","LT"],["\u2265","LTE"],["<","GT"],["\u2264","GTE"]]:[["=","EQ"],["\u2260","NEQ"],["<","LT"],["\u2264","LTE"],[">","GT"],["\u2265","GTE"]];this.setHelpUrl(Blockly.Msg.LOGIC_COMPARE_HELPURL);this.setColour(Blockly.Blocks.logic.HUE);this.setOutput(!0,"Boolean");this.appendValueInput("A");this.appendValueInput("B").appendField(new Blockly.FieldDropdown(a),"OP");this.setInputsInline(!0);var b=this;this.setTooltip(function(){var a=
b.getFieldValue("OP");return{EQ:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_EQ,NEQ:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_NEQ,LT:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LT,LTE:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LTE,GT:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GT,GTE:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GTE}[a]});this.prevBlocks_=[null,null]},onchange:function(){var a=this.getInputTargetBlock("A"),b=this.getInputTargetBlock("B");if(a&&b&&!a.outputConnection.checkType_(b.outputConnection))for(var c=0;c<this.prevBlocks_.length;c++){var d=
this.prevBlocks_[c];if(d===a||d===b)d.setParent(null),d.bumpNeighbours_()}this.prevBlocks_[0]=a;this.prevBlocks_[1]=b}};
Blockly.Blocks.logic_operation={init:function(){var a=[[Blockly.Msg.LOGIC_OPERATION_AND,"AND"],[Blockly.Msg.LOGIC_OPERATION_OR,"OR"]];this.setHelpUrl(Blockly.Msg.LOGIC_OPERATION_HELPURL);this.setColour(Blockly.Blocks.logic.HUE);this.setOutput(!0,"Boolean");this.appendValueInput("A").setCheck("Boolean");this.appendValueInput("B").setCheck("Boolean").appendField(new Blockly.FieldDropdown(a),"OP");this.setInputsInline(!0);var b=this;this.setTooltip(function(){var a=b.getFieldValue("OP");return{AND:Blockly.Msg.LOGIC_OPERATION_TOOLTIP_AND,
OR:Blockly.Msg.LOGIC_OPERATION_TOOLTIP_OR}[a]})}};Blockly.Blocks.logic_negate={init:function(){this.jsonInit({message0:Blockly.Msg.LOGIC_NEGATE_TITLE,args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",colour:Blockly.Blocks.logic.HUE,tooltip:Blockly.Msg.LOGIC_NEGATE_TOOLTIP,helpUrl:Blockly.Msg.LOGIC_NEGATE_HELPURL})}};
Blockly.Blocks.logic_boolean={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[[Blockly.Msg.LOGIC_BOOLEAN_TRUE,"TRUE"],[Blockly.Msg.LOGIC_BOOLEAN_FALSE,"FALSE"]]}],output:"Boolean",colour:Blockly.Blocks.logic.HUE,tooltip:Blockly.Msg.LOGIC_BOOLEAN_TOOLTIP,helpUrl:Blockly.Msg.LOGIC_BOOLEAN_HELPURL})}};
Blockly.Blocks.logic_null={init:function(){this.jsonInit({message0:Blockly.Msg.LOGIC_NULL,output:null,colour:Blockly.Blocks.logic.HUE,tooltip:Blockly.Msg.LOGIC_NULL_TOOLTIP,helpUrl:Blockly.Msg.LOGIC_NULL_HELPURL})}};
Blockly.Blocks.logic_ternary={init:function(){this.setHelpUrl(Blockly.Msg.LOGIC_TERNARY_HELPURL);this.setColour(Blockly.Blocks.logic.HUE);this.appendValueInput("IF").setCheck("Boolean").appendField(Blockly.Msg.LOGIC_TERNARY_CONDITION);this.appendValueInput("THEN").appendField(Blockly.Msg.LOGIC_TERNARY_IF_TRUE);this.appendValueInput("ELSE").appendField(Blockly.Msg.LOGIC_TERNARY_IF_FALSE);this.setOutput(!0);this.setTooltip(Blockly.Msg.LOGIC_TERNARY_TOOLTIP);this.prevParentConnection_=null},onchange:function(){var a=
this.getInputTargetBlock("THEN"),b=this.getInputTargetBlock("ELSE"),c=this.outputConnection.targetConnection;if((a||b)&&c)for(var d=0;2>d;d++){var e=1==d?a:b;e&&!e.outputConnection.checkType_(c)&&(c===this.prevParentConnection_?(this.setParent(null),c.sourceBlock_.bumpNeighbours_()):(e.setParent(null),e.bumpNeighbours_()))}this.prevParentConnection_=c}};Blockly.ComputerCraft.TEXTUTILS_BLOCK_COLOUR_=190;
Blockly.ComputerCraft.TEXTUTILS_FUNCS_=[{blockName:"write",text:"write string %1 %2 to screen at rate %3",args:[["TEXT","String"],["MODE",new Blockly.FieldDropdown([["without newline","slowWrite"],["with newline","slowPrint"]])],["RATE","Number"]],ddFuncName:"MODE",tooltip:"Write the given string to the screen (terminal or monitor)\nat the current cursor position character-by-character.\nThe higher the rate, the faster the string is output.\nA value of 1 outputs one character per second.\nIf a newline is used, the next output will be to a new line."},{funcName:"slowPrint",
text:"write line %1 to screen at rate %2",args:[["TEXT","String"],["RATE","Number"]],tooltip:'Write the given string to the screen (terminal or monitor)\nat the current cursor position character-by-character.\nThe higher the rate, the faster the string is output.\nA value of 1 outputs one character per second.Unlike with the "write string" block, a newline is printed at the end.\n'},{funcName:"pagedPrint",text:"write string %1 paginated",args:[["TEXT","String"]],tooltip:"Print the string to the screen (terminal or monitor),\nwaiting for confirmation before scrolling down."},
{funcName:"serialize",text:"convert table %1 to string",args:[["TABLE","Table"]],output:"String",tooltip:'Serialize the table into a string for\ndisplay, storage, or transmission.\nThe table can be recovered with the\n"convert string to table" block.'},{funcName:"unserialize",text:"convert string %1 to table",args:[["TEXT","String"]],output:"Table",tooltip:'Unserialize a string representation of a table\ncreated with the "convert table to string" block.'},{funcName:"urlEncode",text:"encode %1 for URL",
args:[["TEXT","String"]],tooltip:'Encode a string for transmission within a URL.\nSpaces are replaced with "+s".  Unsafe characters,\nsuch as quotation marks, are replaced by their ASCII\nvalues and preceded with a percent sign (%).'}];Blockly.ComputerCraft.TEXTUTILS_FUNCS_.forEach(function(a){Blockly.ComputerCraft.buildValueBlock("textutils",Blockly.ComputerCraft.TEXTUTILS_BLOCK_COLOUR_,a)});
Blockly.ComputerCraft.buildDependentInputBlock("textutils",Blockly.ComputerCraft.TEXTUTILS_BLOCK_COLOUR_,{funcName:"formatTime",text:"format %1 %2",args:[["CHOICE*",[["current time","current"],["time...","time*"]]],["TIME^","Number"]],addChild:Blockly.ComputerCraft.InputAddType.NEVER,tooltip:"Format the current or given time as a printable string."});
Blockly.ComputerCraft.buildVarArgsBlock("textutils",Blockly.ComputerCraft.TEXTUTILS_BLOCK_COLOUR_,{blockName:"tabulate",text:"display tables %v %1",args:[["MODE",new Blockly.FieldDropdown([["with pagination","pagedTabulate"],["without pagination","tabulate"]])]],ddFuncName:"MODE",varArgName:"table",varArgType:["Table","List"],varArgTooltip:"A table to display.",varArgCount:1,varContainerName:"tables",varContainerTooltip:"Add, remove, or reorder the tables to display.",tooltip:"Print tables to the screen in an ordered form.\nIf pagination is used, this pauses for confirmation before scrolling.\nClick on the star to add (or remove) tables."});Blockly.ComputerCraft.VECTOR_BLOCK_COLOUR_=290;
Blockly.ComputerCraft.VECTOR_FUNCS_=[{funcName:"new",text:"create vector (%1, %2, %3)",args:[["X","Number"],["Y","Number"],["Z","Number"]],output:"Vector",tooltip:"Create a vector with the given x, y, and z co-ordinates."},{blockName:"add_sub",text:"vector %1 %2 vector %3",args:[["X","Vector"],["OP",new Blockly.FieldDropdown([["+","add"],["-","sub"]])],["Y","Vector"]],ddFuncName:"OP",output:"Vector",tooltip:"Compute the sum or difference of two vectors.\nThis does not modify either of the input vectors."},{funcName:"mul",
text:"vector %1 x scalar %2",args:[["V","Vector"],["N","Number"]],output:"Vector",tooltip:"Create a vector that scales the input vector by the input number.\nThis does not modify the input vector."},{funcName:"dot",text:"vector %1 \u00b7 vector %2",args:[["X","Vector"],["Y","Vector"]],output:"Vector",tooltip:"Compute the dot product of the two inputs vectors.\nThis does not modify either of the input vectors.\n"},{funcName:"cross",text:"vector %1 x vector %2",args:[["X","Vector"],["Y","Vector"]],
output:"Vector",tooltip:"Create a vector that is the cross product of the two inputs vectors.\nThis does not modify either of the input vectors.\n"},{funcName:"length",text:"length of vector %1",args:[["X","Vector"]],output:"Number",tooltip:"Calculate the length of the input vector.\nThis is defined as the distance from the origin.\n"},{funcName:"normalize",text:"normalize vector %1",args:[["X","Vector"]],output:"Number",tooltip:"Create a vector that is a normalized version of the input vector.\nIn other words, each of the values will be scaled proportionately\nsuch that the length of the new vector is 1.  The input vector is unchanged."},
{funcName:"tostring",text:"create string for vector %1",args:[["X","Vector"]],output:"String",tooltip:"Create a string representation of the input vector."},{blockName:"get_coord",text:"get the %1 co-ordinate of vector %2",args:[["COORD",new Blockly.FieldDropdown([["x","x"],["y","y"],["z","z"]])],["X","Vector"]],output:"Number",suppressLua:!0,tooltip:"Get the specified co-ordinate from the vector."}];
Blockly.ComputerCraft.VECTOR_FUNCS_.forEach(function(a){Blockly.ComputerCraft.buildValueBlock("vector",Blockly.ComputerCraft.VECTOR_BLOCK_COLOUR_,a)});Blockly.Lua.vector_get_coord=function(a){return[Blockly.Lua.valueToCode(a,"X",Blockly.Lua.ORDER_NONE)+'["'+a.getTitleValue("COORD")+'"]',Blockly.Lua.ORDER_HIGH]};Blockly.ComputerCraft.REDNET_BLOCK_COLOUR_=290;
Blockly.ComputerCraft.REDNET_FUNCS_=[{funcName:"open",text:"open rednet on %1",args:[["SIDE",new Blockly.FieldDropdown(Blockly.ComputerCraft.ValueBlock.SIDES)]],tooltip:"Tell the computer that the side can be used for networking."},{funcName:"close",text:"close rednet on %1",args:[["SIDE",new Blockly.FieldDropdown(Blockly.ComputerCraft.ValueBlock.SIDES)]],tooltip:"Tell the computer that the side can no longer be used for networking."},{funcName:"isOpen",text:"is rednet open on %1?",args:[["SIDE",
new Blockly.FieldDropdown(Blockly.ComputerCraft.ValueBlock.SIDES)]],output:"Boolean",tooltip:"Check if rednet is open on the specified side."},{funcName:"run",text:"run rednet",tooltip:"Run rednet."}];Blockly.ComputerCraft.REDNET_FUNCS_.forEach(function(a){Blockly.ComputerCraft.buildValueBlock("rednet",Blockly.ComputerCraft.REDNET_BLOCK_COLOUR_,a)});
Blockly.ComputerCraft.buildDependentInputBlock("rednet",Blockly.ComputerCraft.REDNET_BLOCK_COLOUR_,{blockName:"broadcast",text:"broadcast %1 %2 on rednet",args:[["OPTION*",[["empty message","announce"],["message","broadcast*"]]],["MESSAGE^","String"]],ddFuncName:"OPTION"});
Blockly.ComputerCraft.buildDependentInputBlock("rednet",Blockly.ComputerCraft.REDNET_BLOCK_COLOUR_,{funcName:"receive",text:"wait %1 %2 for rednet message",args:[["SECONDS^","Number"],["OPTION*",[["forever","forever"],["seconds","seconds*"]]]],multipleOutputs:3});Blockly.ComputerCraft.COLOURS_BLOCK_COLOUR_=80;
var COLOURS_={white:{rgb:"#f0f0f0",value:1},orange:{rgb:"#f2b233",value:2},magenta:{rgb:"#e57fd8",value:4},lightBlue:{rgb:"#99b2f2",value:8},yellow:{rgb:"#dede6c",value:16},lime:{rgb:"#7fcc19",value:32},pink:{rgb:"#f2b2cc",value:64},grey:{rgb:"#4c4c4c",value:128},lightGrey:{rgb:"#999999",value:256},cyan:{rgb:"#4c99b2",value:512},purple:{rgb:"#b266e5",value:1024},blue:{rgb:"#253192",value:2048},brown:{rgb:"#7f664c",value:4096},green:{rgb:"#57a64e",value:8192},red:{rgb:"#cc4c4c",value:16384},black:{rgb:"#191919",
value:32768}};Blockly.FieldColour.COLOURS=Object.keys(COLOURS_).map(function(a){return COLOURS_[a].rgb});Blockly.FieldColour.COLUMNS=4;Blockly.Blocks.colours_picker={init:function(){this.setHelpUrl("http://computercraft.info/wiki/Colors_%28API%29");this.setColour(Blockly.ComputerCraft.COLOURS_BLOCK_COLOUR_);this.appendDummyInput().appendTitle(new Blockly.FieldColour("#cc4c4c"),"COLOUR");this.setOutput(!0,"Number");this.setTooltip("Choose among colours (from left to right, top to bottom):\nwhite, orange, magenta, light blue,\nyellow, lime, pink, grey,\nlight gray, cyan purple, blue,\nbrown, green, red, black.")}};
Blockly.ComputerCraft.buildValueBlock("colours",Blockly.ComputerCraft.COLOURS_BLOCK_COLOUR_,{blockName:"list",text:"%1",args:[["COLOUR",new Blockly.FieldDropdown(Object.keys(COLOURS_).map(function(a){return[Blockly.ComputerCraft.convertFromCamelCase(a).replace("_"," "),a]}))]],output:"Number",tooltip:"Choose among colours by name."});Blockly.Lua.colours_list=function(a){return["colours."+a.getTitleValue("COLOUR"),Blockly.Lua.ORDER_HIGH]};
Blockly.Lua.colours_picker=function(a){a=a.inputList[0].titleRow[0].colour_;for(var b=Object.keys(COLOURS_),c=0;c<b.length;c++){var d=b[c];if(COLOURS_[d].rgb==a)return["colours."+d,Blockly.Lua.ORDER_HIGH]}goog.asserts.fail("Error in colour_picker")};
Blockly.ComputerCraft.buildVarArgsBlock("colours",Blockly.ComputerCraft.COLOURS_BLOCK_COLOUR_,{funcName:"combine",text:"combine colours %v into set",varArgName:"colour",varArgType:"Number",varArgTooltip:"A colour to add to the set.",varArgCount:2,varContainerName:"colours",varContainerTooltip:"Add or remove colours.",output:"Number",tooltip:"Combine one or more colours (or sets of colours) into a set.\nTo change the number of colours, click on the star."});
Blockly.ComputerCraft.buildVarArgsBlock("colours",Blockly.ComputerCraft.COLOURS_BLOCK_COLOUR_,{funcName:"subtract",text:"subtract colours %v from set %1",args:[["Set","Number"]],varArgName:"colour",varArgType:"Number",varArgTooltip:"A colour to subtract.",varArgCount:1,varContainerName:"colours to remove",varContainerTooltip:"Add or remove colours.",output:"Number",tooltip:'Remove one or more colours from the specified set of colours.\nTo change the number of colours to remove, click on the star.\nA set can be built with the "combine" block.'});
Blockly.ComputerCraft.buildValueBlock("colours",Blockly.ComputerCraft.COLOURS_BLOCK_COLOUR_,{funcName:"test",text:"is colour %2 in set %1?",args:[["Set","Number"],["Colour","Number"]],output:"Boolean",tooltip:'Test whether the given colour is in the set.\nA set can be built with the "combine" block.'});Blockly.Blocks.procedures={};Blockly.Blocks.procedures.HUE=290;
Blockly.Blocks.procedures_defnoreturn={init:function(){var a=new Blockly.FieldTextInput(Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,Blockly.Procedures.rename);a.setSpellcheck(!1);this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(a,"NAME").appendField("","PARAMS");this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"]));Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT);this.setColour(Blockly.Blocks.procedures.HUE);
this.setTooltip(Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP);this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL);this.arguments_=[];this.setStatements_(!0);this.statementConnection_=null},validate:function(){var a=Blockly.Procedures.findLegalName(this.getFieldValue("NAME"),this);this.setFieldValue(a,"NAME")},setStatements_:function(a){this.hasStatements_!==a&&(a?(this.appendStatementInput("STACK").appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK",
"RETURN")):this.removeInput("STACK",!0),this.hasStatements_=a)},updateParams_:function(){for(var a=!1,b={},c=0;c<this.arguments_.length;c++){if(b["arg_"+this.arguments_[c].toLowerCase()]){a=!0;break}b["arg_"+this.arguments_[c].toLowerCase()]=!0}a?this.setWarningText(Blockly.Msg.PROCEDURES_DEF_DUPLICATE_WARNING):this.setWarningText(null);a="";this.arguments_.length&&(a=Blockly.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", "));this.setFieldValue(a,"PARAMS")},mutationToDom:function(){for(var a=
document.createElement("mutation"),b=0;b<this.arguments_.length;b++){var c=document.createElement("arg");c.setAttribute("name",this.arguments_[b]);a.appendChild(c)}this.hasStatements_||a.setAttribute("statements","false");return a},domToMutation:function(a){this.arguments_=[];for(var b=0,c;c=a.childNodes[b];b++)"arg"==c.nodeName.toLowerCase()&&this.arguments_.push(c.getAttribute("name"));this.updateParams_();this.setStatements_("false"!==a.getAttribute("statements"))},decompose:function(a){var b=
a.newBlock("procedures_mutatorcontainer");b.initSvg();this.getInput("RETURN")?b.setFieldValue(this.hasStatements_?"TRUE":"FALSE","STATEMENTS"):b.getInput("STATEMENT_INPUT").setVisible(!1);for(var c=b.getInput("STACK").connection,d=0;d<this.arguments_.length;d++){var e=a.newBlock("procedures_mutatorarg");e.initSvg();e.setFieldValue(this.arguments_[d],"NAME");e.oldLocation=d;c.connect(e.previousConnection);c=e.nextConnection}Blockly.Procedures.mutateCallers(this.getFieldValue("NAME"),this.workspace,
this.arguments_,null);return b},compose:function(a){this.arguments_=[];this.paramIds_=[];for(var b=a.getInputTargetBlock("STACK");b;)this.arguments_.push(b.getFieldValue("NAME")),this.paramIds_.push(b.id),b=b.nextConnection&&b.nextConnection.targetBlock();this.updateParams_();Blockly.Procedures.mutateCallers(this.getFieldValue("NAME"),this.workspace,this.arguments_,this.paramIds_);a=a.getFieldValue("STATEMENTS");if(null!==a&&(a="TRUE"==a,this.hasStatements_!=a))if(a)this.setStatements_(!0),a=this.getInput("STACK").connection,
a.targetConnection||!this.statementConnection_||this.statementConnection_.targetConnection||this.statementConnection_.sourceBlock_.workspace!=this.workspace?this.statementConnection_=null:a.connect(this.statementConnection_);else{a=this.getInput("STACK").connection;if(this.statementConnection_=a.targetConnection)a=a.targetBlock(),a.setParent(null),a.bumpNeighbours_();this.setStatements_(!1)}},dispose:function(){var a=this.getFieldValue("NAME");Blockly.Procedures.disposeCallers(a,this.workspace);this.constructor.prototype.dispose.apply(this,
arguments)},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},renameVar:function(a,b){for(var c=!1,d=0;d<this.arguments_.length;d++)Blockly.Names.equals(a,this.arguments_[d])&&(this.arguments_[d]=b,c=!0);if(c&&(this.updateParams_(),this.mutator.isVisible()))for(var c=this.mutator.workspace_.getAllBlocks(),d=0,e;e=c[d];d++)"procedures_mutatorarg"==e.type&&Blockly.Names.equals(a,e.getFieldValue("NAME"))&&e.setFieldValue(b,"NAME")},
customContextMenu:function(a){var b={enabled:!0},c=this.getFieldValue("NAME");b.text=Blockly.Msg.PROCEDURES_CREATE_DO.replace("%1",c);var d=goog.dom.createDom("mutation");d.setAttribute("name",c);for(var e=0;e<this.arguments_.length;e++)c=goog.dom.createDom("arg"),c.setAttribute("name",this.arguments_[e]),d.appendChild(c);d=goog.dom.createDom("block",null,d);d.setAttribute("type",this.callType_);b.callback=Blockly.ContextMenu.callbackFactory(this,d);a.push(b);if(!this.isCollapsed())for(e=0;e<this.arguments_.length;e++)b=
{enabled:!0},c=this.arguments_[e],b.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",c),d=goog.dom.createDom("field",null,c),d.setAttribute("name","VAR"),d=goog.dom.createDom("block",null,d),d.setAttribute("type","variables_get"),b.callback=Blockly.ContextMenu.callbackFactory(this,d),a.push(b)},callType_:"procedures_callnoreturn"};
Blockly.Blocks.procedures_defreturn={init:function(){var a=new Blockly.FieldTextInput(Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE,Blockly.Procedures.rename);a.setSpellcheck(!1);this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(a,"NAME").appendField("","PARAMS");this.appendValueInput("RETURN").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"]));Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT&&
this.setCommentText(Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT);this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP);this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL);this.arguments_=[];this.setStatements_(!0);this.statementConnection_=null},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,validate:Blockly.Blocks.procedures_defnoreturn.validate,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,
domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,dispose:Blockly.Blocks.procedures_defnoreturn.dispose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,renameVar:Blockly.Blocks.procedures_defnoreturn.renameVar,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"};
Blockly.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE);this.appendStatementInput("STACK");this.appendDummyInput("STATEMENT_INPUT").appendField(Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new Blockly.FieldCheckbox("TRUE"),"STATEMENTS");this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.procedures_mutatorarg={init:function(){this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(new Blockly.FieldTextInput("x",this.validator_),"NAME");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP);this.contextMenu=!1},validator_:function(a){return(a=a.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""))||null}};
Blockly.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(Blockly.Blocks.procedures.HUE);this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL);this.arguments_=[];this.quarkConnections_={};this.quarkArguments_=null},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(a,b){Blockly.Names.equals(a,this.getProcedureCall())&&(this.setFieldValue(b,
"NAME"),this.setTooltip((this.outputConnection?Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP:Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",b)))},setProcedureParameters:function(a,b){if(b)if(goog.array.equals(this.arguments_,a))this.quarkArguments_=b;else{this.setCollapsed(!1);if(b.length!=a.length)throw"Error: paramNames and paramIds must be the same length.";this.quarkArguments_||(this.quarkConnections_={},a.join("\n")==this.arguments_.join("\n")?this.quarkArguments_=b:this.quarkArguments_=
[]);var c=this.rendered;this.rendered=!1;for(var d=this.arguments_.length-1;0<=d;d--){var e=this.getInput("ARG"+d);if(e){var f=e.connection.targetConnection;this.quarkConnections_[this.quarkArguments_[d]]=f;this.removeInput("ARG"+d)}}this.arguments_=[].concat(a);this.renderArgs_();if(this.quarkArguments_=b)for(d=0;d<this.arguments_.length;d++){var e=this.getInput("ARG"+d),g=this.quarkArguments_[d];g in this.quarkConnections_&&(f=this.quarkConnections_[g],!f||f.targetConnection||f.sourceBlock_.workspace!=
this.workspace?delete this.quarkConnections_[g]:e.connection.connect(f))}(this.rendered=c)&&this.render()}else this.quarkConnections_={},this.quarkArguments_=null},renderArgs_:function(){for(var a=0;a<this.arguments_.length;a++){var b=this.appendValueInput("ARG"+a).setAlign(Blockly.ALIGN_RIGHT).appendField(this.arguments_[a]);b.init()}if(b=this.getInput("TOPROW"))this.arguments_.length?this.getField("WITH")||(b.appendField(Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),b.init()):this.getField("WITH")&&
b.removeField("WITH")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("name",this.getProcedureCall());for(var b=0;b<this.arguments_.length;b++){var c=document.createElement("arg");c.setAttribute("name",this.arguments_[b]);a.appendChild(c)}return a},domToMutation:function(a){var b=a.getAttribute("name");this.setFieldValue(b,"NAME");this.setTooltip((this.outputConnection?Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP:Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",
b));if((b=Blockly.Procedures.getDefinition(b,this.workspace))&&b.mutator&&b.mutator.isVisible())this.setProcedureParameters(b.arguments_,b.paramIds_);else{for(var b=[],c=0,d;d=a.childNodes[c];c++)"arg"==d.nodeName.toLowerCase()&&b.push(d.getAttribute("name"));this.setProcedureParameters(b,b)}},renameVar:function(a,b){for(var c=0;c<this.arguments_.length;c++)Blockly.Names.equals(a,this.arguments_[c])&&(this.arguments_[c]=b,this.getInput("ARG"+c).fieldRow[0].setValue(b))},customContextMenu:function(a){var b=
{enabled:!0};b.text=Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF;var c=this.getProcedureCall(),d=this.workspace;b.callback=function(){var a=Blockly.Procedures.getDefinition(c,d);a&&a.select()};a.push(b)}};
Blockly.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME");this.setOutput(!0);this.setColour(Blockly.Blocks.procedures.HUE);this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL);this.arguments_=[];this.quarkConnections_={};this.quarkArguments_=null},getProcedureCall:Blockly.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:Blockly.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters:Blockly.Blocks.procedures_callnoreturn.setProcedureParameters,
renderArgs_:Blockly.Blocks.procedures_callnoreturn.renderArgs_,mutationToDom:Blockly.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_callnoreturn.domToMutation,renameVar:Blockly.Blocks.procedures_callnoreturn.renameVar,customContextMenu:Blockly.Blocks.procedures_callnoreturn.customContextMenu};
Blockly.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_IF);this.appendValueInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP);this.setHelpUrl(Blockly.Msg.PROCEDURES_IFRETURN_HELPURL);this.hasReturnValue_=!0},
mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("value",Number(this.hasReturnValue_));return a},domToMutation:function(a){this.hasReturnValue_=1==a.getAttribute("value");this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(){var a=!1,b=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(b.type)){a=!0;break}b=b.getSurroundParent()}while(b);a?("procedures_defnoreturn"==b.type&&
this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=b.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(Blockly.Msg.PROCEDURES_IFRETURN_WARNING)},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};Blockly.Blocks.texts={};Blockly.Blocks.texts.HUE=160;
Blockly.Blocks.text={init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1));this.setOutput(!0,"String");var a=this;this.setTooltip(function(){var b=a.getParent();return b&&b.tooltip||Blockly.Msg.TEXT_TEXT_TOOLTIP})},newQuote_:function(a){return new Blockly.FieldImage(a==this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",12,12,'"')}};
Blockly.Blocks.text_join={init:function(){this.setHelpUrl(Blockly.Msg.TEXT_JOIN_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.itemCount_=2;this.updateShape_();this.setOutput(!0,"String");this.setMutator(new Blockly.Mutator(["text_create_join_item"]));this.setTooltip(Blockly.Msg.TEXT_JOIN_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),10);
this.updateShape_()},decompose:function(a){var b=a.newBlock("text_create_join_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.itemCount_;d++){var e=a.newBlock("text_create_join_item");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");for(a=[];b;)a.push(b.valueConnection_),b=b.nextConnection&&b.nextConnection.targetBlock();this.itemCount_=a.length;this.updateShape_();for(b=0;b<this.itemCount_;b++)a[b]&&
this.getInput("ADD"+b).connection.connect(a[b])},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;){var c=this.getInput("ADD"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){if(this.getInput("EMPTY"))this.removeInput("EMPTY");else for(var a=0;this.getInput("ADD"+a);)this.removeInput("ADD"+a),a++;if(0==this.itemCount_)this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));
else for(a=0;a<this.itemCount_;a++){var b=this.appendValueInput("ADD"+a);0==a&&b.appendField(Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH)}},newQuote_:Blockly.Blocks.text.newQuote_};Blockly.Blocks.text_create_join_container={init:function(){this.setColour(Blockly.Blocks.texts.HUE);this.appendDummyInput().appendField(Blockly.Msg.TEXT_CREATE_JOIN_TITLE_JOIN);this.appendStatementInput("STACK");this.setTooltip(Blockly.Msg.TEXT_CREATE_JOIN_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.text_create_join_item={init:function(){this.setColour(Blockly.Blocks.texts.HUE);this.appendDummyInput().appendField(Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.text_append={init:function(){this.setHelpUrl(Blockly.Msg.TEXT_APPEND_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.appendValueInput("TEXT").appendField(Blockly.Msg.TEXT_APPEND_TO).appendField(new Blockly.FieldVariable(Blockly.Msg.TEXT_APPEND_VARIABLE),"VAR").appendField(Blockly.Msg.TEXT_APPEND_APPENDTEXT);this.setPreviousStatement(!0);this.setNextStatement(!0);var a=this;this.setTooltip(function(){return Blockly.Msg.TEXT_APPEND_TOOLTIP.replace("%1",a.getFieldValue("VAR"))})},
getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,"VAR")}};Blockly.Blocks.text_length={init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_LENGTH_TITLE,args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",colour:Blockly.Blocks.texts.HUE,tooltip:Blockly.Msg.TEXT_LENGTH_TOOLTIP,helpUrl:Blockly.Msg.TEXT_LENGTH_HELPURL})}};
Blockly.Blocks.text_isEmpty={init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_ISEMPTY_TITLE,args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",colour:Blockly.Blocks.texts.HUE,tooltip:Blockly.Msg.TEXT_ISEMPTY_TOOLTIP,helpUrl:Blockly.Msg.TEXT_ISEMPTY_HELPURL})}};
Blockly.Blocks.text_indexOf={init:function(){var a=[[Blockly.Msg.TEXT_INDEXOF_OPERATOR_FIRST,"FIRST"],[Blockly.Msg.TEXT_INDEXOF_OPERATOR_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.TEXT_INDEXOF_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.setOutput(!0,"Number");this.appendValueInput("VALUE").setCheck("String").appendField(Blockly.Msg.TEXT_INDEXOF_INPUT_INTEXT);this.appendValueInput("FIND").setCheck("String").appendField(new Blockly.FieldDropdown(a),"END");Blockly.Msg.TEXT_INDEXOF_TAIL&&this.appendDummyInput().appendField(Blockly.Msg.TEXT_INDEXOF_TAIL);
this.setInputsInline(!0);this.setTooltip(Blockly.Msg.TEXT_INDEXOF_TOOLTIP)}};
Blockly.Blocks.text_charAt={init:function(){this.WHERE_OPTIONS=[[Blockly.Msg.TEXT_CHARAT_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_CHARAT_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_CHARAT_FIRST,"FIRST"],[Blockly.Msg.TEXT_CHARAT_LAST,"LAST"],[Blockly.Msg.TEXT_CHARAT_RANDOM,"RANDOM"]];this.setHelpUrl(Blockly.Msg.TEXT_CHARAT_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.setOutput(!0,"String");this.appendValueInput("VALUE").setCheck("String").appendField(Blockly.Msg.TEXT_CHARAT_INPUT_INTEXT);this.appendDummyInput("AT");
this.setInputsInline(!0);this.updateAt_(!0);this.setTooltip(Blockly.Msg.TEXT_CHARAT_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getInput("AT").type==Blockly.INPUT_VALUE;a.setAttribute("at",b);return a},domToMutation:function(a){a="false"!=a.getAttribute("at");this.updateAt_(a)},updateAt_:function(a){this.removeInput("AT");this.removeInput("ORDINAL",!0);a?(this.appendValueInput("AT").setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):
this.appendDummyInput("AT");Blockly.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_CHARAT_TAIL));var b=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(b){var d="FROM_START"==b||"FROM_END"==b;if(d!=a){var e=this.sourceBlock_;e.updateAt_(d);e.setFieldValue(b,"WHERE");return null}});this.getInput("AT").appendField(b,"WHERE")}};
Blockly.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]];this.WHERE_OPTIONS_2=[[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);
this.appendValueInput("STRING").setCheck("String").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);this.appendDummyInput("AT1");this.appendDummyInput("AT2");Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL);this.setInputsInline(!0);this.setOutput(!0,"String");this.updateAt_(1,!0);this.updateAt_(2,!0);this.setTooltip(Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation"),
b=this.getInput("AT1").type==Blockly.INPUT_VALUE;a.setAttribute("at1",b);b=this.getInput("AT2").type==Blockly.INPUT_VALUE;a.setAttribute("at2",b);return a},domToMutation:function(a){var b="true"==a.getAttribute("at1");a="true"==a.getAttribute("at2");this.updateAt_(1,b);this.updateAt_(2,a)},updateAt_:function(a,b){this.removeInput("AT"+a);this.removeInput("ORDINAL"+a,!0);b?(this.appendValueInput("AT"+a).setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+a).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):
this.appendDummyInput("AT"+a);2==a&&Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL));var c=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+a],function(c){var e="FROM_START"==c||"FROM_END"==c;if(e!=b){var f=this.sourceBlock_;f.updateAt_(a,e);f.setFieldValue(c,"WHERE"+a);return null}});this.getInput("AT"+a).appendField(c,"WHERE"+a);1==a&&this.moveInputBefore("AT1","AT2")}};
Blockly.Blocks.text_changeCase={init:function(){var a=[[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(Blockly.Msg.TEXT_CHANGECASE_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.appendValueInput("TEXT").setCheck("String").appendField(new Blockly.FieldDropdown(a),"CASE");this.setOutput(!0,"String");this.setTooltip(Blockly.Msg.TEXT_CHANGECASE_TOOLTIP)}};
Blockly.Blocks.text_trim={init:function(){var a=[[Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(Blockly.Msg.TEXT_TRIM_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.appendValueInput("TEXT").setCheck("String").appendField(new Blockly.FieldDropdown(a),"MODE");this.setOutput(!0,"String");this.setTooltip(Blockly.Msg.TEXT_TRIM_TOOLTIP)}};
Blockly.Blocks.text_print={init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,colour:Blockly.Blocks.texts.HUE,tooltip:Blockly.Msg.TEXT_PRINT_TOOLTIP,helpUrl:Blockly.Msg.TEXT_PRINT_HELPURL})}};
Blockly.Blocks.text_prompt_ext={init:function(){var a=[[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);var b=this,a=new Blockly.FieldDropdown(a,function(a){b.updateType_(a)});this.appendValueInput("TEXT").appendField(a,"TYPE");this.setOutput(!0,"String");this.setTooltip(function(){return"TEXT"==b.getFieldValue("TYPE")?Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT:Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},
updateType_:function(a){"NUMBER"==a?this.outputConnection.setCheck("Number"):this.outputConnection.setCheck("String")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("type",this.getFieldValue("TYPE"));return a},domToMutation:function(a){this.updateType_(a.getAttribute("type"))}};
Blockly.Blocks.text_prompt={init:function(){var a=[[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],b=this;this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);a=new Blockly.FieldDropdown(a,function(a){b.updateType_(a)});this.appendDummyInput().appendField(a,"TYPE").appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1));this.setOutput(!0,"String");b=this;this.setTooltip(function(){return"TEXT"==
b.getFieldValue("TYPE")?Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT:Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},newQuote_:Blockly.Blocks.text.newQuote_,updateType_:Blockly.Blocks.text_prompt_ext.updateType_,mutationToDom:Blockly.Blocks.text_prompt_ext.mutationToDom,domToMutation:Blockly.Blocks.text_prompt_ext.domToMutation};Blockly.ComputerCraft.DISK_BLOCK_COLOUR_=290;
Blockly.ComputerCraft.DISK_FUNCS_=[{funcName:"isPresent",output:"Boolean",text:"an item is in disk drive",tooltip:"Check whether any item (such as a music disk or floppy disk)\nis present in the adjacent disk drive."},{funcName:"hasData",output:"Boolean",text:"a floppy disk is in drive",tooltip:"Check whether a floppy disk (as opposed to a music disk) is in the drive."},{funcName:"getMountPath",output:"String",text:"get mount path for floppy disk in drive",tooltip:"Get the directory name where the contents\nof the floppy disk can be accessed."},
{funcName:"getLabel",text:"read label on floppy disk in drive",output:"String",tooltip:"Read the label of the floppy disk in the drive."},{funcName:"getID",text:"get ID of floppy disk in drive",output:"Number",tooltip:"Get the floppy disk's unique numeric identifier."},{funcName:"hasAudio",text:"music disk is in drive",output:"Boolean",tooltip:"Check if a music disk is in the drive."},{funcName:"getAudioTitle",text:"get title of music disk in drive",output:"String",tooltip:"Get the title of the music disk in the drive."},
{funcName:"playAudio",text:"play music disk in drive",tooltip:"Starts playing the music disk in the drive."},{funcName:"stopAudio",text:"stop music disk in drive",tooltip:"Stop playing the music disk in the drive."},{funcName:"eject",text:"eject from drive",tooltip:"Eject any item currently in the drive,\nspilling it into the world as a loose item."},{funcName:"setLabel",text:"Set the label on the disk in drive to %1",args:[["LABEL","String"]],tooltip:"Write to the label to the floppy disk in the attached drive."}];
Blockly.ComputerCraft.DISK_FUNCS_.forEach(function(a){Blockly.ComputerCraft.buildSideInputBlock("disk",Blockly.ComputerCraft.DISK_BLOCK_COLOUR_,a)});