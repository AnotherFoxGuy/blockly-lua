<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Blockly Lua uncompressed</title>

  <script src="blockly_compressed.js"></script>
  <script src="blocks_compressed.js"></script>
  <script src="msg/js/en.js"></script>

  <script src="javascript_compressed.js"></script>

  <script src="generators/lua.js"></script>
  <script src="generators/lua/logic.js"></script>
  <script src="generators/lua/loops.js"></script>
  <script src="generators/lua/math.js"></script>
  <script src="generators/lua/text.js"></script>
  <script src="generators/lua/lists.js"></script>
  <script src="generators/lua/colour.js"></script>
  <script src="generators/lua/variables.js"></script>
  <script src="generators/lua/procedures.js"></script>


  <script src="blocks/ComputerCraft-Turtle.js"></script>
  <script src="generators/lua/ComputerCraft-Turtle.js"></script>
  <script src="blocks/ComputerCraft-Gps.js"></script>
  <script src="generators/lua/ComputerCraft-Gps.js"></script>
  <script src="blocks/ComputerCraft-Term.js"></script>
  <script src="generators/lua/ComputerCraft-Term.js"></script>

  <style>
    body {
      background-color: #fff;
      font-family: sans-serif;
    }
    
    h1 {
      font-weight: normal;
      font-size: 140%;
    }
    
    table {
      width: 99%;
      height: 99%;
    }
    
    #funcText {
      margin-top: 1em;
      margin-left: 1.5em;
      font-family: sans-serif;
    }
    
    #funcText>img {
      height: 3px;
      width: 15px;
      vertical-align: middle;
      margin-right: .5em;
    }
    
    #y1 {
      background-color: #36c;
    }
  </style>

</head>

<body>
  <h1>Blockly Lua uncompressed</h1>



  <p>
    <button onclick="showCode()">Show lua</button>
  </p>

  <table>
    <tr>
      <td>
        <textarea rows="25" cols="50" id="visualization" style="width: 400px; width: 400px"></textarea>
      </td>
      <td>
        <div id="blocklyDiv" style="height: 400px"></div>
      </td>
    </tr>
  </table>

  <xml id="toolbox" style="display: none">
    <category name="Logic">
      <block type="controls_if"></block>
      <block type="logic_compare"></block>
      <block type="logic_operation"></block>
      <block type="logic_negate"></block>
      <block type="logic_boolean"></block>
    </category>
    <category name="Loops">
      <block type="controls_repeat_ext">
        <value name="TIMES">
          <block type="math_number">
            <field name="NUM">10</field>
          </block>
        </value>
      </block>
      <block type="controls_whileUntil"></block>
    </category>
    <category name="Math">
      <block type="math_number"></block>
      <block type="math_arithmetic"></block>
      <block type="math_single"></block>
    </category>
    <category name="Text">
      <block type="text"></block>
      <block type="text_length"></block>
      <block type="text_print"></block>
    </category>

    <category name="Variables" custom="VARIABLE"></category>
    <category name="Functions" custom="PROCEDURE"></category>


    <category name="Turtle">
      <block type="turtle_movement"></block>
      <block type="turtle_dig"></block>
      <block type="turtle_place"></block>
      <block type="turtle_detect"></block>
    </category>

    <category name="Gps">
      <block type="gps_locate"></block>
    </category>

    <category name="Term">
      <block type="term_write"></block>
    </category>


  </xml>



  <script>
    var workspace = Blockly.inject('blocklyDiv', {
      media: 'media/',
      toolbox: document.getElementById('toolbox')
    });

    function showCode() {
      // Generate Lua code and display it.
      //Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
      var code = Blockly.Lua.workspaceToCode(workspace);
      var div = document.getElementById('visualization');
      div.innerHTML = code;
      //alert(code);
    }
  </script>

</body>

</html>
